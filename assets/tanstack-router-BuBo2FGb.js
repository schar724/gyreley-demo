import{r as _,a as we}from"./vendor-BRGH1Yg5.js";var te={exports:{}},Et={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var be=_,Ce=Symbol.for("react.element"),Le=Symbol.for("react.fragment"),Re=Object.prototype.hasOwnProperty,xe=be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Me={key:!0,ref:!0,__self:!0,__source:!0};function ee(t,r,e){var n,o={},i=null,s=null;e!==void 0&&(i=""+e),r.key!==void 0&&(i=""+r.key),r.ref!==void 0&&(s=r.ref);for(n in r)Re.call(r,n)&&!Me.hasOwnProperty(n)&&(o[n]=r[n]);if(t&&t.defaultProps)for(n in r=t.defaultProps,r)o[n]===void 0&&(o[n]=r[n]);return{$$typeof:Ce,type:t,key:i,ref:s,props:o,_owner:xe.current}}Et.Fragment=Le;Et.jsx=ee;Et.jsxs=ee;te.exports=Et;var y=te.exports;const Ut="pushstate",Ht="popstate",ne="beforeunload",re=t=>(t.preventDefault(),t.returnValue=""),Ee=()=>{removeEventListener(ne,re,{capture:!0})};function oe(t){let r=t.getLocation();const e=new Set;let n=[];const o=()=>{r=t.getLocation(),e.forEach(s=>s({location:r}))},i=async(s,a)=>{var c;if(!((a==null?void 0:a.ignoreBlocker)??!1)&&typeof document<"u"&&n.length){for(const u of n)if(!await u()){(c=t.onBlocked)==null||c.call(t,o);return}}s()};return{get location(){return r},get length(){return t.getLength()},subscribers:e,subscribe:s=>(e.add(s),()=>{e.delete(s)}),push:(s,a,c)=>{a=Wt(a),i(()=>{t.pushState(s,a),o()},c)},replace:(s,a,c)=>{a=Wt(a),i(()=>{t.replaceState(s,a),o()},c)},go:(s,a)=>{i(()=>{t.go(s),o()},a)},back:s=>{i(()=>{t.back(),o()},s)},forward:s=>{i(()=>{t.forward(),o()},s)},createHref:s=>t.createHref(s),block:s=>(n.push(s),n.length===1&&addEventListener(ne,re,{capture:!0}),()=>{n=n.filter(a=>a!==s),n.length||Ee()}),flush:()=>{var s;return(s=t.flush)==null?void 0:s.call(t)},destroy:()=>{var s;return(s=t.destroy)==null?void 0:s.call(t)},notify:o}}function Wt(t){return t||(t={}),{...t,key:Te()}}function se(t){const r=(t==null?void 0:t.window)??(typeof document<"u"?window:void 0),e=r.history.pushState,n=r.history.replaceState,o=(t==null?void 0:t.createHref)??(m=>m),i=(t==null?void 0:t.parseLocation)??(()=>Pt(`${r.location.pathname}${r.location.search}${r.location.hash}`,r.history.state));let s=i(),a;const c=()=>s;let l,u;const d=()=>{l&&(p._ignoreSubscribers=!0,(l.isPush?r.history.pushState:r.history.replaceState)(l.state,"",l.href),p._ignoreSubscribers=!1,l=void 0,u=void 0,a=void 0)},h=(m,v,C)=>{const L=o(v);u||(a=s),s=Pt(v,C),l={href:L,state:C,isPush:(l==null?void 0:l.isPush)||m==="push"},u||(u=Promise.resolve().then(()=>d()))},f=()=>{s=i(),p.notify()},p=oe({getLocation:c,getLength:()=>r.history.length,pushState:(m,v)=>h("push",m,v),replaceState:(m,v)=>h("replace",m,v),back:()=>r.history.back(),forward:()=>r.history.forward(),go:m=>r.history.go(m),createHref:m=>o(m),flush:d,destroy:()=>{r.history.pushState=e,r.history.replaceState=n,r.removeEventListener(Ut,f),r.removeEventListener(Ht,f)},onBlocked:m=>{a&&s!==a&&(s=a,m())}});return r.addEventListener(Ut,f),r.addEventListener(Ht,f),r.history.pushState=function(...m){const v=e.apply(r.history,m);return p._ignoreSubscribers||f(),v},r.history.replaceState=function(...m){const v=n.apply(r.history,m);return p._ignoreSubscribers||f(),v},p}function An(t){const r=typeof document<"u"?window:void 0;return se({window:r,parseLocation:()=>{const e=r.location.hash.split("#").slice(1).join("#")??"/";return Pt(e,r.history.state)},createHref:e=>`${r.location.pathname}${r.location.search}#${e}`})}function Ie(t={initialEntries:["/"]}){const r=t.initialEntries;let e=t.initialIndex??r.length-1;const n=r.map(()=>({}));return oe({getLocation:()=>Pt(r[e],n[e]),getLength:()=>r.length,pushState:(i,s)=>{e<r.length-1&&(r.splice(e+1),n.splice(e+1)),n.push(s),r.push(i),e=Math.max(r.length-1,0)},replaceState:(i,s)=>{n[e]=s,r[e]=i},back:()=>{e=Math.max(e-1,0)},forward:()=>{e=Math.min(e+1,r.length-1)},go:i=>{e=Math.min(Math.max(e+i,0),r.length-1)},createHref:i=>i})}function Pt(t,r){const e=t.indexOf("#"),n=t.indexOf("?");return{href:t,pathname:t.substring(0,e>0?n>0?Math.min(e,n):e:n>0?n:t.length),hash:e>-1?t.substring(e):"",search:n>-1?t.slice(n,e===-1?void 0:e):"",state:r||{}}}function Te(){return(Math.random()+1).toString(36).substring(7)}var Fe="Invariant failed";function G(t,r){if(!t)throw new Error(Fe)}const Ot=_.createContext(null);function ie(){return typeof document>"u"?Ot:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Ot,Ot)}function ot(t){const r=_.useContext(ie());return t==null||t.warn,r}var ae={exports:{}},ce={},le={exports:{}},ue={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ft=_;function ke(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var je=typeof Object.is=="function"?Object.is:ke,Oe=ft.useState,$e=ft.useEffect,De=ft.useLayoutEffect,ze=ft.useDebugValue;function Be(t,r){var e=r(),n=Oe({inst:{value:e,getSnapshot:r}}),o=n[0].inst,i=n[1];return De(function(){o.value=e,o.getSnapshot=r,$t(o)&&i({inst:o})},[t,e,r]),$e(function(){return $t(o)&&i({inst:o}),t(function(){$t(o)&&i({inst:o})})},[t]),ze(e),e}function $t(t){var r=t.getSnapshot;t=t.value;try{var e=r();return!je(t,e)}catch{return!0}}function Ne(t,r){return r()}var Ae=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ne:Be;ue.useSyncExternalStore=ft.useSyncExternalStore!==void 0?ft.useSyncExternalStore:Ae;le.exports=ue;var Ve=le.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var It=_,Ke=Ve;function Ue(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var He=typeof Object.is=="function"?Object.is:Ue,We=Ke.useSyncExternalStore,Ge=It.useRef,Je=It.useEffect,qe=It.useMemo,Xe=It.useDebugValue;ce.useSyncExternalStoreWithSelector=function(t,r,e,n,o){var i=Ge(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=qe(function(){function c(f){if(!l){if(l=!0,u=f,f=n(f),o!==void 0&&s.hasValue){var p=s.value;if(o(p,f))return d=p}return d=f}if(p=d,He(u,f))return p;var m=n(f);return o!==void 0&&o(p,m)?(u=f,p):(u=f,d=m)}var l=!1,u,d,h=e===void 0?null:e;return[function(){return c(r())},h===null?void 0:function(){return c(h())}]},[r,e,n,o]);var a=We(t,i[0],i[1]);return Je(function(){s.hasValue=!0,s.value=a},[a]),Xe(a),a};ae.exports=ce;var Ye=ae.exports;class Qe{constructor(r,e){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=n=>{var o,i;this.listeners.add(n);const s=(i=(o=this.options)==null?void 0:o.onSubscribe)==null?void 0:i.call(o,n,this);return()=>{this.listeners.delete(n),s==null||s()}},this.setState=n=>{var o,i,s;const a=this.state;this.state=(o=this.options)!=null&&o.updateFn?this.options.updateFn(a)(n):n(a),(s=(i=this.options)==null?void 0:i.onUpdate)==null||s.call(i),this._flush()},this._flush=()=>{if(this._batching)return;const n=++this._flushing;this.listeners.forEach(o=>{this._flushing===n&&o()})},this.batch=n=>{if(this._batching)return n();this._batching=!0,n(),this._batching=!1,this._flush()},this.state=r,this.options=e}}function Ze(t,r=e=>e){return Ye.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,r,tn)}function tn(t,r){if(Object.is(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;if(t instanceof Map&&r instanceof Map){if(t.size!==r.size)return!1;for(const[n,o]of t)if(!r.has(n)||!Object.is(o,r.get(n)))return!1;return!0}if(t instanceof Set&&r instanceof Set){if(t.size!==r.size)return!1;for(const n of t)if(!r.has(n))return!1;return!0}const e=Object.keys(t);if(e.length!==Object.keys(r).length)return!1;for(let n=0;n<e.length;n++)if(!Object.prototype.hasOwnProperty.call(r,e[n])||!Object.is(t[e[n]],r[e[n]]))return!1;return!0}const J="__root__";function en(t,r){let e,n,o,i="";for(e in t)if((o=t[e])!==void 0)if(Array.isArray(o))for(n=0;n<o.length;n++)i&&(i+="&"),i+=encodeURIComponent(e)+"="+encodeURIComponent(o[n]);else i&&(i+="&"),i+=encodeURIComponent(e)+"="+encodeURIComponent(o);return""+i}function Gt(t){if(!t)return"";const r=decodeURIComponent(t);return r==="false"?!1:r==="true"?!0:+r*0===0&&+r+""===r?+r:r}function nn(t,r){let e,n;const o={},i=t.split("&");for(;e=i.shift();){const s=e.indexOf("=");if(s!==-1){n=e.slice(0,s),n=decodeURIComponent(n);const a=e.slice(s+1);o[n]!==void 0?o[n]=[].concat(o[n],Gt(a)):o[n]=Gt(a)}else n=e,n=decodeURIComponent(n),o[n]=""}return o}const rn=sn(JSON.parse),on=an(JSON.stringify,JSON.parse);function sn(t){return r=>{r.substring(0,1)==="?"&&(r=r.substring(1));const e=nn(r);for(const n in e){const o=e[n];if(typeof o=="string")try{e[n]=t(o)}catch{}}return e}}function an(t,r){function e(n){if(typeof n=="object"&&n!==null)try{return t(n)}catch{}else if(typeof n=="string"&&typeof r=="function")try{return r(n),t(n)}catch{}return n}return n=>{n={...n},Object.keys(n).forEach(i=>{const s=n[i];typeof s>"u"||s===void 0?delete n[i]:n[i]=e(s)});const o=en(n).toString();return o?`?${o}`:""}}function St(t){return t[t.length-1]}function cn(t){return typeof t=="function"}function dt(t,r){return cn(t)?t(r):t}function Lt(t,r){return r.reduce((e,n)=>(e[n]=t[n],e),{})}function Y(t,r){if(t===r)return t;const e=r,n=qt(t)&&qt(e);if(n||pt(t)&&pt(e)){const o=n?t:Object.keys(t),i=o.length,s=n?e:Object.keys(e),a=s.length,c=n?[]:{};let l=0;for(let u=0;u<a;u++){const d=n?u:s[u];(!n&&o.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(c[d]=void 0,l++):(c[d]=Y(t[d],e[d]),c[d]===t[d]&&t[d]!==void 0&&l++)}return i===a&&l===i?t:c}return e}function pt(t){if(!Jt(t))return!1;const r=t.constructor;if(typeof r>"u")return!0;const e=r.prototype;return!(!Jt(e)||!e.hasOwnProperty("isPrototypeOf"))}function Jt(t){return Object.prototype.toString.call(t)==="[object Object]"}function qt(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Xt(t,r){let e=Object.keys(t);return r&&(e=e.filter(n=>t[n]!==void 0)),e}function ht(t,r,e){if(t===r)return!0;if(typeof t!=typeof r)return!1;if(pt(t)&&pt(r)){const n=(e==null?void 0:e.ignoreUndefined)??!0,o=Xt(t,n),i=Xt(r,n);return!(e!=null&&e.partial)&&o.length!==i.length?!1:i.every(s=>ht(t[s],r[s],e))}return Array.isArray(t)&&Array.isArray(r)?t.length!==r.length?!1:!t.some((n,o)=>!ht(n,r[o],e)):!1}const _t=typeof window<"u"?_.useLayoutEffect:_.useEffect;function ut(t){let r,e;const n=new Promise((o,i)=>{r=o,e=i});return n.status="pending",n.resolve=o=>{n.status="resolved",n.value=o,r(o),t==null||t(o)},n.reject=o=>{n.status="rejected",e(o)},n}function Dt(t){const r=_.useRef({value:t,prev:null}),e=r.current.value;return t!==e&&(r.current={value:t,prev:e}),r.current.prev}function ln(t,r,e={},n={}){const o=_.useRef(typeof IntersectionObserver=="function"),i=_.useRef(null);return _.useEffect(()=>{if(!(!t.current||!o.current||n.disabled))return i.current=new IntersectionObserver(([s])=>{r(s)},e),i.current.observe(t.current),()=>{var s;(s=i.current)==null||s.disconnect()}},[r,e,n.disabled,t]),i.current}function un(t){const r=_.useRef(null);return _.useEffect(()=>{t&&(typeof t=="function"?t(r.current):t.current=r.current)}),r}function nt(t){return Tt(t.filter(r=>r!==void 0).join("/"))}function Tt(t){return t.replace(/\/{2,}/g,"/")}function At(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function at(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function dn(t){return at(At(t))}function xt(t,r){return t.endsWith("/")&&t!=="/"&&t!==`${r}/`?t.slice(0,-1):t}function hn(t,r,e){return xt(t,e)===xt(r,e)}function fn({basepath:t,base:r,to:e,trailingSlash:n="never",caseSensitive:o}){var i,s;r=Mt(t,r,o),e=Mt(t,e,o);let a=mt(r);const c=mt(e);a.length>1&&((i=St(a))==null?void 0:i.value)==="/"&&a.pop(),c.forEach((u,d)=>{u.value==="/"?d?d===c.length-1&&a.push(u):a=[u]:u.value===".."?a.pop():u.value==="."||a.push(u)}),a.length>1&&(((s=St(a))==null?void 0:s.value)==="/"?n==="never"&&a.pop():n==="always"&&a.push({type:"pathname",value:"/"}));const l=nt([t,...a.map(u=>u.value)]);return Tt(l)}function mt(t){if(!t)return[];t=Tt(t);const r=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),r.push({type:"pathname",value:"/"})),!t)return r;const e=t.split("/").filter(Boolean);return r.push(...e.map(n=>n==="$"||n==="*"?{type:"wildcard",value:n}:n.charAt(0)==="$"?{type:"param",value:n}:{type:"pathname",value:decodeURI(n)})),t.slice(-1)==="/"&&(t=t.substring(1),r.push({type:"pathname",value:"/"})),r}function bt({path:t,params:r,leaveWildcards:e,leaveParams:n,decodeCharMap:o}){const i=mt(t),s={};for(const[a,c]of Object.entries(r)){const l=typeof c=="string";["*","_splat"].includes(a)?s[a]=l?encodeURI(c):c:s[a]=l?pn(c,o):c}return nt(i.map(a=>{if(a.type==="wildcard"){const c=s._splat;return e?`${a.value}${c??""}`:c}if(a.type==="param"){if(n){const c=s[a.value];return`${a.value}${c??""}`}return s[a.value.substring(1)]??"undefined"}return a.value}))}function pn(t,r){let e=encodeURIComponent(t);if(r)for(const[n,o]of r)e=e.replaceAll(n,o);return e}function Ct(t,r,e){const n=mn(t,r,e);if(!(e.to&&!n))return n??{}}function Mt(t,r,e=!1){const n=e?t:t.toLowerCase(),o=e?r:r.toLowerCase();switch(!0){case n==="/":return r;case o===n:return"";case r.length<t.length:return r;case o[n.length]!=="/":return r;case o.startsWith(n):return r.slice(t.length);default:return r}}function mn(t,r,e){if(t!=="/"&&!r.startsWith(t))return;r=Mt(t,r,e.caseSensitive);const n=Mt(t,`${e.to??"$"}`,e.caseSensitive),o=mt(r),i=mt(n);r.startsWith("/")||o.unshift({type:"pathname",value:"/"}),n.startsWith("/")||i.unshift({type:"pathname",value:"/"});const s={};return(()=>{for(let c=0;c<Math.max(o.length,i.length);c++){const l=o[c],u=i[c],d=c>=o.length-1,h=c>=i.length-1;if(u){if(u.type==="wildcard"){const f=decodeURI(nt(o.slice(c).map(p=>p.value)));return s["*"]=f,s._splat=f,!0}if(u.type==="pathname"){if(u.value==="/"&&!(l!=null&&l.value))return!0;if(l){if(e.caseSensitive){if(u.value!==l.value)return!1}else if(u.value.toLowerCase()!==l.value.toLowerCase())return!1}}if(!l)return!1;if(u.type==="param"){if(l.value==="/")return!1;l.value.charAt(0)!=="$"&&(s[u.value.substring(1)]=decodeURIComponent(l.value))}}if(!d&&h)return s["**"]=nt(o.slice(c+1).map(f=>f.value)),!!e.fuzzy&&(u==null?void 0:u.value)!=="/"}return!0})()?s:void 0}function Vn(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},t.throw)throw t;return t}function it(t){return!!(t!=null&&t.isRedirect)}function zt(t){return!!(t!=null&&t.isRedirect)&&t.href}function Vt(t){const r=t.errorComponent??Ft;return y.jsx(vn,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:e,reset:n})=>e?_.createElement(r,{error:e,reset:n}):t.children})}class vn extends _.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(r){return{resetKey:r.getResetKey()}}static getDerivedStateFromError(r){return{error:r}}reset(){this.setState({error:null})}componentDidUpdate(r,e){e.error&&e.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(r,e){this.props.onCatch&&this.props.onCatch(r,e)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Ft({error:t}){const[r,e]=_.useState(!1);return y.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[y.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),y.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>e(n=>!n),children:r?"Hide Error":"Show Error"})]}),y.jsx("div",{style:{height:".25rem"}}),r?y.jsx("div",{children:y.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?y.jsx("code",{children:t.message}):null})}):null]})}function K(t){const r=ot({warn:(t==null?void 0:t.router)===void 0}),e=(t==null?void 0:t.router)||r,n=_.useRef();return Ze(e.__store,o=>{if(t!=null&&t.select){if(t.structuralSharing??e.options.defaultStructuralSharing){const i=Y(n.current,t.select(o));return n.current=i,i}return t.select(o)}return o})}function Z(t){return!!(t!=null&&t.isNotFound)}function gn(t){const r=K({select:e=>`not-found-${e.location.pathname}-${e.status}`});return y.jsx(Vt,{getResetKey:()=>r,onCatch:(e,n)=>{var o;if(Z(e))(o=t.onCatch)==null||o.call(t,e,n);else throw e},errorComponent:({error:e})=>{var n;if(Z(e))return(n=t.fallback)==null?void 0:n.call(t,e);throw e},children:t.children})}function yn(){return y.jsx("p",{children:"Not Found"})}const _n={stringify:t=>JSON.stringify(t,function(e,n){const o=this[e],i=Yt.find(s=>s.stringifyCondition(o));return i?i.stringify(o):n}),parse:t=>JSON.parse(t,function(e,n){const o=this[e],i=Yt.find(s=>s.parseCondition(o));return i?i.parse(o):n})},Yt=[{stringifyCondition:t=>t instanceof Date,stringify:t=>({$date:t.toISOString()}),parseCondition:t=>pt(t)&&t.$date,parse:t=>new Date(t.$date)},{stringifyCondition:t=>t===void 0,stringify:()=>({$undefined:""}),parseCondition:t=>pt(t)&&t.$undefined==="",parse:()=>{}}],de=["component","errorComponent","pendingComponent","notFoundComponent"];function Sn(t){var r;for(const e of de)if((r=t.options[e])!=null&&r.preload)return!0;return!1}function Bt(t,r){if(t==null)return{};if("~standard"in t){const e=t["~standard"].validate(r);if(e instanceof Promise)throw new Nt("Async validation not supported");if(e.issues)throw new Nt(JSON.stringify(e.issues,void 0,2));return e.value}return"parse"in t?t.parse(r):typeof t=="function"?t(r):{}}function Kn(t){return new Pn(t)}class Pn{constructor(r){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=e=>e(),this.update=e=>{var n;e.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const o=this.options;this.options={...this.options,...e},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(i=>[encodeURIComponent(i),i])):void 0,(!this.basepath||e.basepath&&e.basepath!==o.basepath)&&(e.basepath===void 0||e.basepath===""||e.basepath==="/"?this.basepath="/":this.basepath=`/${dn(e.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?Ie({initialEntries:[this.basepath||"/"]}):se()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new Qe(bn(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(i=>!["redirected"].includes(i.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((n=window.CSS)==null?void 0:n.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const e=this.options.notFoundRoute;e&&(e.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[e.id]=e);const n=s=>{s.forEach((a,c)=>{a.init({originalIndex:c,defaultSsr:this.options.defaultSsr});const l=this.routesById[a.id];if(G(!l,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const d=at(a.fullPath);(!this.routesByPath[d]||a.fullPath.endsWith("/"))&&(this.routesByPath[d]=a)}const u=a.children;u!=null&&u.length&&n(u)})};n([this.routeTree]);const o=[];Object.values(this.routesById).forEach((s,a)=>{var c;if(s.isRoot||!s.path)return;const l=At(s.fullPath),u=mt(l);for(;u.length>1&&((c=u[0])==null?void 0:c.value)==="/";)u.shift();const d=u.map(h=>h.value==="/"?.75:h.type==="param"?.5:h.type==="wildcard"?.25:1);o.push({child:s,trimmed:l,parsed:u,index:a,scores:d})}),this.flatRoutes=o.sort((s,a)=>{const c=Math.min(s.scores.length,a.scores.length);for(let l=0;l<c;l++)if(s.scores[l]!==a.scores[l])return a.scores[l]-s.scores[l];if(s.scores.length!==a.scores.length)return a.scores.length-s.scores.length;for(let l=0;l<c;l++)if(s.parsed[l].value!==a.parsed[l].value)return s.parsed[l].value>a.parsed[l].value?1:-1;return s.index-a.index}).map((s,a)=>(s.child.rank=a,s.child))},this.subscribe=(e,n)=>{const o={eventType:e,fn:n};return this.subscribers.add(o),()=>{this.subscribers.delete(o)}},this.emit=e=>{this.subscribers.forEach(n=>{n.eventType===e.type&&n.fn(e)})},this.parseLocation=e=>{const n=({pathname:a,search:c,hash:l,state:u})=>{const d=this.options.parseSearch(c),h=this.options.stringifySearch(d);return{pathname:a,searchStr:h,search:Y(e==null?void 0:e.search,d),hash:l.split("#").reverse()[0]??"",href:`${a}${h}${l}`,state:Y(e==null?void 0:e.state,u)}},o=n(this.history.location),{__tempLocation:i,__tempKey:s}=o.state;if(i&&(!s||s===this.tempLocationKey)){const a=n(i);return a.state.key=o.state.key,delete a.state.__tempLocation,{...a,maskedLocation:o}}return o},this.resolvePathWithBase=(e,n)=>fn({basepath:this.basepath,base:e,to:Tt(n),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(e,n)=>{let o={};const i=at(e.pathname),s=u=>Ct(this.basepath,i,{to:u.fullPath,caseSensitive:u.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let a=(n==null?void 0:n.to)!==void 0?this.routesByPath[n.to]:void 0;a?o=s(a):a=this.flatRoutes.find(u=>{const d=s(u);return d?(o=d,!0):!1});let c=a||this.routesById[J];const l=[c];for(;c.parentRoute;)c=c.parentRoute,l.unshift(c);return{matchedRoutes:l,routeParams:o,foundRoute:a}},this.cancelMatch=e=>{const n=this.getMatch(e);n&&(n.abortController.abort(),clearTimeout(n.pendingTimeout))},this.cancelMatches=()=>{var e;(e=this.state.pendingMatches)==null||e.forEach(n=>{this.cancelMatch(n.id)})},this.buildLocation=e=>{const n=(i={},s)=>{var a,c,l,u,d,h;const f=i._fromLocation?this.matchRoutes(i._fromLocation,{_buildLocation:!0}):this.state.matches,p=i.from!=null?f.find(R=>Ct(this.basepath,at(R.pathname),{to:i.from,caseSensitive:!1,fuzzy:!1})):void 0,m=(p==null?void 0:p.pathname)||this.latestLocation.pathname;G(i.from==null||p!=null,"Could not find match for from: "+i.from);const v=(a=this.state.pendingMatches)!=null&&a.length?(c=St(this.state.pendingMatches))==null?void 0:c.search:((l=St(f))==null?void 0:l.search)||this.latestLocation.search,C=s==null?void 0:s.matchedRoutes.filter(R=>f.find(b=>b.routeId===R.id));let L;if(i.to)L=this.resolvePathWithBase(m,`${i.to}`);else{const R=this.routesById[(u=C==null?void 0:C.find(b=>{const T=bt({path:b.fullPath,params:(s==null?void 0:s.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap});return nt([this.basepath,T])===m}))==null?void 0:u.id];L=this.resolvePathWithBase(m,(R==null?void 0:R.to)??m)}const x={...(d=St(f))==null?void 0:d.params};let g=(i.params??!0)===!0?x:{...x,...dt(i.params,x)};Object.keys(g).length>0&&(s==null||s.matchedRoutes.map(R=>{var b;return((b=R.options.params)==null?void 0:b.stringify)??R.options.stringifyParams}).filter(Boolean).forEach(R=>{g={...g,...R(g)}})),L=bt({path:L,params:g??{},leaveWildcards:!1,leaveParams:e.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let P=v;if(e._includeValidateSearch&&((h=this.options.search)!=null&&h.strict)){let R={};s==null||s.matchedRoutes.forEach(b=>{try{b.options.validateSearch&&(R={...R,...Bt(b.options.validateSearch,{...R,...P})??{}})}catch{}}),P=R}P=(R=>{const b=(s==null?void 0:s.matchedRoutes.reduce((F,k)=>{var U;const j=[];if("search"in k.options)(U=k.options.search)!=null&&U.middlewares&&j.push(...k.options.search.middlewares);else if(k.options.preSearchFilters||k.options.postSearchFilters){const B=({search:H,next:et})=>{let E=H;"preSearchFilters"in k.options&&k.options.preSearchFilters&&(E=k.options.preSearchFilters.reduce((A,I)=>I(A),H));const N=et(E);return"postSearchFilters"in k.options&&k.options.postSearchFilters?k.options.postSearchFilters.reduce((A,I)=>I(A),N):N};j.push(B)}if(e._includeValidateSearch&&k.options.validateSearch){const B=({search:H,next:et})=>{try{const E=et(H);return{...E,...Bt(k.options.validateSearch,E)??{}}}catch{}};j.push(B)}return F.concat(j)},[]))??[],T=({search:F})=>i.search?i.search===!0?F:dt(i.search,F):{};b.push(T);const S=(F,k)=>{if(F>=b.length)return k;const U=b[F];return U({search:k,next:B=>S(F+1,B)})};return S(0,R)})(P),P=Y(v,P);const O=this.options.stringifySearch(P),z=i.hash===!0?this.latestLocation.hash:i.hash?dt(i.hash,this.latestLocation.hash):void 0,$=z?`#${z}`:"";let w=i.state===!0?this.latestLocation.state:i.state?dt(i.state,this.latestLocation.state):{};return w=Y(this.latestLocation.state,w),{pathname:L,search:P,searchStr:O,state:w,hash:z??"",href:`${L}${O}${$}`,unmaskOnReload:i.unmaskOnReload}},o=(i={},s)=>{var a;const c=n(i);let l=s?n(s):void 0;if(!l){let h={};const f=(a=this.options.routeMasks)==null?void 0:a.find(p=>{const m=Ct(this.basepath,c.pathname,{to:p.from,caseSensitive:!1,fuzzy:!1});return m?(h=m,!0):!1});if(f){const{from:p,...m}=f;s={...Lt(e,["from"]),...m,params:h},l=n(s)}}const u=this.getMatchedRoutes(c,i),d=n(i,u);if(l){const h=this.getMatchedRoutes(l,s),f=n(s,h);d.maskedLocation=f}return d};return e.mask?o(e,{...Lt(e,["from"]),...e.mask}):o(e)},this.commitLocation=({viewTransition:e,ignoreBlocker:n,...o})=>{const i=()=>{o.state.key=this.latestLocation.state.key;const c=ht(o.state,this.latestLocation.state);return delete o.state.key,c},s=this.latestLocation.href===o.href,a=this.commitLocationPromise;if(this.commitLocationPromise=ut(()=>{a==null||a.resolve()}),s&&i())this.load();else{let{maskedLocation:c,...l}=o;c&&(l={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...l,search:l.searchStr,state:{...l.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(l.unmaskOnReload??this.options.unmaskOnReload??!1)&&(l.state.__tempKey=this.tempLocationKey)),this.shouldViewTransition=e,this.history[o.replace?"replace":"push"](l.href,l.state,{ignoreBlocker:n})}return this.resetNextScroll=o.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:e,resetScroll:n,viewTransition:o,ignoreBlocker:i,...s}={})=>{const a=s.href;if(a){const l=Pt(a,{});s.to=l.pathname,s.search=this.options.parseSearch(l.search),s.hash=l.hash.slice(1)}const c=this.buildLocation({...s,_includeValidateSearch:!0});return this.commitLocation({...c,viewTransition:o,replace:e,resetScroll:n,ignoreBlocker:i})},this.navigate=({to:e,...n})=>{const o=String(e);let i;try{new URL(`${o}`),i=!0}catch{}return G(!i),this.buildAndCommitLocation({...n,to:e})},this.load=async()=>{this.latestLocation=this.parseLocation(this.latestLocation);let e,n,o;for(o=new Promise(i=>{this.startReactTransition(async()=>{var s;try{const a=this.latestLocation,c=this.state.resolvedLocation,l=c.href!==a.href,u=c.pathname!==a.pathname;this.cancelMatches();let d;this.__store.batch(()=>{d=this.matchRoutes(a),this.__store.setState(h=>({...h,status:"pending",isLoading:!0,location:a,pendingMatches:d,cachedMatches:h.cachedMatches.filter(f=>!d.find(p=>p.id===f.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:c,toLocation:a,pathChanged:u,hrefChanged:l}),this.emit({type:"onBeforeLoad",fromLocation:c,toLocation:a,pathChanged:u,hrefChanged:l}),await this.loadMatches({matches:d,location:a,onReady:async()=>{this.startViewTransition(async()=>{let h,f,p;this.__store.batch(()=>{this.__store.setState(m=>{const v=m.matches,C=m.pendingMatches||m.matches;return h=v.filter(L=>!C.find(x=>x.id===L.id)),f=C.filter(L=>!v.find(x=>x.id===L.id)),p=v.filter(L=>C.find(x=>x.id===L.id)),{...m,isLoading:!1,loadedAt:Date.now(),matches:C,pendingMatches:void 0,cachedMatches:[...m.cachedMatches,...h.filter(L=>L.status!=="error")]}}),this.clearExpiredCache()}),[[h,"onLeave"],[f,"onEnter"],[p,"onStay"]].forEach(([m,v])=>{m.forEach(C=>{var L,x;(x=(L=this.looseRoutesById[C.routeId].options)[v])==null||x.call(L,C)})})})}})}catch(a){zt(a)?(e=a,this.isServer||this.navigate({...a,replace:!0,ignoreBlocker:!0})):Z(a)&&(n=a),this.__store.setState(c=>({...c,statusCode:e?e.statusCode:n?404:c.matches.some(l=>l.status==="error")?500:200,redirect:e}))}this.latestLoadPromise===o&&((s=this.commitLocationPromise)==null||s.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),i()})}),this.latestLoadPromise=o,await o;this.latestLoadPromise&&o!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=e=>{const n=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,n&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let o;typeof n=="object"&&this.isViewTransitionTypesSupported?o={update:e,types:n.types}:o=e,document.startViewTransition(o)}else e()},this.updateMatch=(e,n)=>{var o;let i;const s=(o=this.state.pendingMatches)==null?void 0:o.find(u=>u.id===e),a=this.state.matches.find(u=>u.id===e),c=this.state.cachedMatches.find(u=>u.id===e),l=s?"pendingMatches":a?"matches":c?"cachedMatches":"";return l&&this.__store.setState(u=>{var d;return{...u,[l]:(d=u[l])==null?void 0:d.map(h=>h.id===e?i=n(h):h)}}),i},this.getMatch=e=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(n=>n.id===e),this.loadMatches=async({location:e,matches:n,preload:o,onReady:i,updateMatch:s=this.updateMatch})=>{let a,c=!1;const l=async()=>{c||(c=!0,await(i==null?void 0:i()))},u=h=>!!(o&&!this.state.matches.find(f=>f.id===h));!this.isServer&&!this.state.matches.length&&l();const d=(h,f)=>{var p,m,v;if(zt(f))throw f;if(it(f)||Z(f)){if(s(h.id,C=>({...C,status:it(f)?"redirected":Z(f)?"notFound":"error",isFetching:!1,error:f,beforeLoadPromise:void 0,loaderPromise:void 0})),f.routeId||(f.routeId=h.routeId),(p=h.beforeLoadPromise)==null||p.resolve(),(m=h.loaderPromise)==null||m.resolve(),(v=h.loadPromise)==null||v.resolve(),it(f))throw c=!0,f=this.resolveRedirect({...f,_fromLocation:e}),f;if(Z(f))throw this._handleNotFound(n,f,{updateMatch:s}),f}};try{await new Promise((h,f)=>{(async()=>{var p,m,v;try{const C=(g,P,q)=>{var O,z;const{id:$,routeId:w}=n[g],R=this.looseRoutesById[w];if(P instanceof Promise)throw P;P.routerCode=q,a=a??g,d(this.getMatch($),P);try{(z=(O=R.options).onError)==null||z.call(O,P)}catch(b){P=b,d(this.getMatch($),P)}s($,b=>{var T,S;return(T=b.beforeLoadPromise)==null||T.resolve(),(S=b.loadPromise)==null||S.resolve(),{...b,error:P,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[g,{id:P,routeId:q}]of n.entries()){const O=this.getMatch(P),z=(p=n[g-1])==null?void 0:p.id,$=this.looseRoutesById[q],w=$.options.pendingMs??this.options.defaultPendingMs,R=!!(i&&!this.isServer&&!u(P)&&($.options.loader||$.options.beforeLoad)&&typeof w=="number"&&w!==1/0&&($.options.pendingComponent??this.options.defaultPendingComponent));let b=!0;if((O.beforeLoadPromise||O.loaderPromise)&&(R&&setTimeout(()=>{try{l()}catch{}},w),await O.beforeLoadPromise,b=this.getMatch(P).status!=="success"),b){try{s(P,I=>({...I,loadPromise:ut(()=>{var W;(W=I.loadPromise)==null||W.resolve()}),beforeLoadPromise:ut()}));const T=new AbortController;let S;R&&(S=setTimeout(()=>{try{l()}catch{}},w));const{paramsError:F,searchError:k}=this.getMatch(P);F&&C(g,F,"PARSE_PARAMS"),k&&C(g,k,"VALIDATE_SEARCH");const U=()=>z?this.getMatch(z).context:this.options.context??{};s(P,I=>({...I,isFetching:"beforeLoad",fetchCount:I.fetchCount+1,abortController:T,pendingTimeout:S,context:{...U(),...I.__routeContext,...I.__beforeLoadContext}}));const{search:j,params:B,context:H,cause:et}=this.getMatch(P),E=u(P),N={search:j,abortController:T,params:B,preload:E,context:H,location:e,navigate:I=>this.navigate({...I,_fromLocation:e}),buildLocation:this.buildLocation,cause:E?"preload":et,matches:n};let A=await((v=(m=$.options).beforeLoad)==null?void 0:v.call(m,N))??{};this.serializeLoaderData&&(A=this.serializeLoaderData("__beforeLoadContext",A,{router:this,match:this.getMatch(P)})),(it(A)||Z(A))&&C(g,A,"BEFORE_LOAD"),s(P,I=>({...I,__beforeLoadContext:A,context:{...U(),...I.__routeContext,...A},abortController:T}))}catch(T){C(g,T,"BEFORE_LOAD")}s(P,T=>{var S;return(S=T.beforeLoadPromise)==null||S.resolve(),{...T,beforeLoadPromise:void 0,isFetching:!1}})}}const L=n.slice(0,a),x=[];L.forEach(({id:g,routeId:P},q)=>{x.push((async()=>{const{loaderPromise:O}=this.getMatch(g);let z=!1;if(O)await O;else{const $=x[q-1],w=this.looseRoutesById[P],R=()=>{const{params:E,loaderDeps:N,abortController:A,context:I,cause:W}=this.getMatch(g),st=u(g);return{params:E,deps:N,preload:!!st,parentMatchPromise:$,abortController:A,context:I,location:e,navigate:ct=>this.navigate({...ct,_fromLocation:e}),cause:st?"preload":W,route:w}},b=Date.now()-this.getMatch(g).updatedAt,T=u(g),S=T?w.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:w.options.staleTime??this.options.defaultStaleTime??0,F=w.options.shouldReload,k=typeof F=="function"?F(R()):F;s(g,E=>({...E,loaderPromise:ut(),preload:!!T&&!this.state.matches.find(N=>N.id===g)}));const U=async()=>{var E,N,A,I,W,st,ct,vt;try{const lt=async()=>{const V=this.getMatch(g);V.minPendingPromise&&await V.minPendingPromise};try{w._lazyPromise===void 0&&(w.lazyFn?w._lazyPromise=w.lazyFn().then(tt=>{const{id:M,...D}=tt.options;Object.assign(w.options,D)}):w._lazyPromise=Promise.resolve()),w._componentsPromise===void 0&&(w._componentsPromise=w._lazyPromise.then(()=>Promise.all(de.map(async tt=>{const M=w.options[tt];M!=null&&M.preload&&await M.preload()})))),s(g,tt=>({...tt,isFetching:"loader"}));let V=await((N=(E=w.options).loader)==null?void 0:N.call(E,R()));this.serializeLoaderData&&(V=this.serializeLoaderData("loaderData",V,{router:this,match:this.getMatch(g)})),d(this.getMatch(g),V),await w._lazyPromise,await lt();const Q=(I=(A=w.options).head)==null?void 0:I.call(A,{matches:n,match:this.getMatch(g),params:this.getMatch(g).params,loaderData:V}),X=Q==null?void 0:Q.meta,gt=Q==null?void 0:Q.links,yt=Q==null?void 0:Q.scripts,wt=(st=(W=w.options).headers)==null?void 0:st.call(W,{loaderData:V});s(g,tt=>({...tt,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:V,meta:X,links:gt,scripts:yt,headers:wt}))}catch(V){let Q=V;await lt(),d(this.getMatch(g),V);try{(vt=(ct=w.options).onError)==null||vt.call(ct,V)}catch(X){Q=X,d(this.getMatch(g),X)}s(g,X=>({...X,error:Q,status:"error",isFetching:!1}))}await w._componentsPromise}catch(lt){s(g,V=>({...V,loaderPromise:void 0})),d(this.getMatch(g),lt)}},{status:j,invalid:B}=this.getMatch(g);z=j==="success"&&(B||(k??b>S)),T&&w.options.preload===!1||(z?(async()=>{try{await U()}catch(E){zt(E)&&await this.navigate(E)}})():j!=="success"&&await U());const{loaderPromise:H,loadPromise:et}=this.getMatch(g);H==null||H.resolve(),et==null||et.resolve()}return s(g,$=>({...$,isFetching:z?$.isFetching:!1,loaderPromise:void 0,invalid:!1})),this.getMatch(g)})())}),await Promise.all(x),h()}catch(C){f(C)}})()}),await l()}catch(h){if(it(h)||Z(h))throw Z(h)&&!o&&await l(),h}return n},this.invalidate=e=>{const n=o=>{var i;return((i=e==null?void 0:e.filter)==null?void 0:i.call(e,o))??!0?{...o,invalid:!0,...o.status==="error"?{status:"pending",error:void 0}:{}}:o};return this.__store.setState(o=>{var i;return{...o,matches:o.matches.map(n),cachedMatches:o.cachedMatches.map(n),pendingMatches:(i=o.pendingMatches)==null?void 0:i.map(n)}}),this.load()},this.resolveRedirect=e=>{const n=e;return n.href||(n.href=this.buildLocation(n).href),n},this.clearCache=e=>{const n=e==null?void 0:e.filter;n!==void 0?this.__store.setState(o=>({...o,cachedMatches:o.cachedMatches.filter(i=>!n(i))})):this.__store.setState(o=>({...o,cachedMatches:[]}))},this.clearExpiredCache=()=>{const e=n=>{const o=this.looseRoutesById[n.routeId];if(!o.options.loader)return!0;const i=(n.preload?o.options.preloadGcTime??this.options.defaultPreloadGcTime:o.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(n.status!=="error"&&Date.now()-n.updatedAt<i)};this.clearCache({filter:e})},this.preloadRoute=async e=>{const n=this.buildLocation(e);let o=this.matchRoutes(n,{throwOnError:!0,preload:!0,dest:e});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),s=new Set([...i,...this.state.cachedMatches.map(a=>a.id)]);this.__store.batch(()=>{o.forEach(a=>{s.has(a.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,a]}))})});try{return o=await this.loadMatches({matches:o,location:n,preload:!0,updateMatch:(a,c)=>{i.has(a)?o=o.map(l=>l.id===a?c(l):l):this.updateMatch(a,c)}}),o}catch(a){if(it(a))return await this.preloadRoute({...a,_fromLocation:n});console.error(a);return}},this.matchRoute=(e,n)=>{const o={...e,to:e.to?this.resolvePathWithBase(e.from||"",e.to):void 0,params:e.params||{},leaveParams:!0},i=this.buildLocation(o);if(n!=null&&n.pending&&this.state.status!=="pending")return!1;const a=((n==null?void 0:n.pending)===void 0?!this.state.isLoading:n.pending)?this.latestLocation:this.state.resolvedLocation,c=Ct(this.basepath,a.pathname,{...n,to:i.pathname});return!c||e.params&&!ht(c,e.params,{partial:!0})?!1:c&&((n==null?void 0:n.includeSearch)??!0)?ht(a.search,i.search,{partial:!0})?c:!1:c},this.dehydrate=()=>{var e;const n=((e=this.options.errorSerializer)==null?void 0:e.serialize)??Cn;return{state:{dehydratedMatches:this.state.matches.map(o=>({...Lt(o,["id","status","updatedAt"]),error:o.error?{data:n(o.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var e,n,o;let i;typeof document<"u"&&(i=this.options.transformer.parse((e=window.__TSR__)==null?void 0:e.dehydrated)),G(i),this.dehydratedData=i.payload,(o=(n=this.options).hydrate)==null||o.call(n,i.payload);const s=i.router.state,a=this.matchRoutes(this.state.location).map(c=>{const l=s.dehydratedMatches.find(u=>u.id===c.id);return G(l,`Could not find a client-side match for dehydrated match with id: ${c.id}!`),{...c,...l}});this.__store.setState(c=>({...c,matches:a})),this.manifest=i.router.manifest},this.injectedHtml=[],this.injectHtml=e=>{const n=()=>(this.injectedHtml=this.injectedHtml.filter(o=>o!==n),e);this.injectedHtml.push(n)},this.injectScript=(e,n)=>{this.injectHtml(`<script class='tsr-once'>${e}; if (typeof __TSR__ !== 'undefined') __TSR__.cleanScripts()<\/script>`)},this.streamedKeys=new Set,this.getStreamedValue=e=>{var n;if(this.isServer)return;const o=(n=window.__TSR__)==null?void 0:n.streamedValues[e];if(o)return o.parsed||(o.parsed=this.options.transformer.parse(o.value)),o.parsed},this.streamValue=(e,n)=>{var o;this.streamedKeys.has(e),this.streamedKeys.add(e),this.injectScript(`__TSR__.streamedValues['${e}'] = { value: ${(o=this.serializer)==null?void 0:o.call(this,this.options.transformer.stringify(n))}}`)},this._handleNotFound=(e,n,{updateMatch:o=this.updateMatch}={})=>{const i=Object.fromEntries(e.map(c=>[c.routeId,c]));let s=(n.global?this.looseRoutesById[J]:this.looseRoutesById[n.routeId])||this.looseRoutesById[J];for(;!s.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&s.id!==J;)s=s.parentRoute,G(s);const a=i[s.id];G(a,"Could not find match for route: "+s.id),o(a.id,c=>({...c,status:"notFound",error:n,isFetching:!1})),n.routerCode==="BEFORE_LOAD"&&s.parentRoute&&(n.routeId=s.parentRoute.id,this._handleNotFound(e,n,{updateMatch:o}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(e=>e.status==="notFound"||e.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...r,caseSensitive:r.caseSensitive??!1,notFoundMode:r.notFoundMode??"fuzzy",stringifySearch:r.stringifySearch??on,parseSearch:r.parseSearch??rn,transformer:r.transformer??_n}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(r,e,n){return typeof r=="string"?this.matchRoutesInternal({pathname:r,search:e},n):this.matchRoutesInternal(r,e)}matchRoutesInternal(r,e){const{foundRoute:n,matchedRoutes:o,routeParams:i}=this.getMatchedRoutes(r,e==null?void 0:e.dest);let s=!1;(n?n.path!=="/"&&i["**"]:at(r.pathname))&&(this.options.notFoundRoute?o.push(this.options.notFoundRoute):s=!0);const a=(()=>{if(s){if(this.options.notFoundMode!=="root")for(let u=o.length-1;u>=0;u--){const d=o[u];if(d.children)return d.id}return J}})(),c=o.map(u=>{var d;let h;const f=((d=u.options.params)==null?void 0:d.parse)??u.options.parseParams;if(f)try{const p=f(i);Object.assign(i,p)}catch(p){if(h=new wn(p.message,{cause:p}),e!=null&&e.throwOnError)throw h;return h}}),l=[];return o.forEach((u,d)=>{var h,f,p,m,v,C,L,x;const g=l[d-1],[P,q]=(()=>{const j=(g==null?void 0:g.search)??r.search;try{const B=Bt(u.options.validateSearch,j)??{};return[{...j,...B},void 0]}catch(B){const H=new Nt(B.message,{cause:B});if(e!=null&&e.throwOnError)throw H;return[j,H]}})(),O=((f=(h=u.options).loaderDeps)==null?void 0:f.call(h,{search:P}))??"",z=O?JSON.stringify(O):"",$=bt({path:u.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),w=bt({path:u.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+z,R=this.getMatch(w),b=this.state.matches.find(j=>j.routeId===u.id),T=b?"stay":"enter";let S;if(R)S={...R,cause:T,params:b?Y(b.params,i):i,search:Y(b?b.search:R.search,P)};else{const j=u.options.loader||u.options.beforeLoad||u.lazyFn||Sn(u)?"pending":"success";S={id:w,index:d,routeId:u.id,params:b?Y(b.params,i):i,pathname:nt([this.basepath,$]),updatedAt:Date.now(),search:b?Y(b.search,P):P,searchError:void 0,status:j,isFetching:!1,error:void 0,paramsError:c[d],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:T,loaderDeps:b?Y(b.loaderDeps,O):O,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:u.options.staticData||{},loadPromise:ut(),fullPath:u.fullPath}}const F=(m=(p=u.options).head)==null?void 0:m.call(p,{matches:l,match:S,params:S.params,loaderData:S.loaderData??void 0});S.links=F==null?void 0:F.links,S.scripts=F==null?void 0:F.scripts,S.meta=F==null?void 0:F.meta,S.status==="success"&&(S.headers=(C=(v=u.options).headers)==null?void 0:C.call(v,{loaderData:S.loaderData})),e!=null&&e.preload||(S.globalNotFound=a===u.id),S.searchError=q;const U=(g==null?void 0:g.id)?g.context??this.options.context??{}:this.options.context??{};if(S.context={...U,...S.__routeContext,...S.__beforeLoadContext},!R&&(e==null?void 0:e._buildLocation)!==!0){const j={deps:O,params:S.params,context:S.context,location:r,navigate:B=>this.navigate({...B,_fromLocation:r}),buildLocation:this.buildLocation,cause:S.cause,abortController:S.abortController,preload:!!S.preload,matches:l};S.__routeContext=((x=(L=u.options).context)==null?void 0:x.call(L,j))??{},S.context={...U,...S.__routeContext,...S.__beforeLoadContext}}l.push(S)}),l}}class Nt extends Error{}class wn extends Error{}function bn(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Cn(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function Qt(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function Zt(t){if("name"in t&&"message"in t){const r=new Error(t.message);return r.name=t.name,r}return t.data}const kt=_.createContext(void 0),Ln=_.createContext(void 0);function rt(t){const r=_.useContext(t.from?Ln:kt);return K({select:n=>{const o=n.matches.find(i=>t.from?t.from===i.routeId:i.id===r);if(G(!((t.shouldThrow??!0)&&!o),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),o!==void 0)return t.select?t.select(o):o},structuralSharing:t.structuralSharing})}function he(t){return rt({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:r=>t.select?t.select(r.loaderData):r.loaderData})}function fe(t){const{select:r,...e}=t;return rt({...e,select:n=>r?r(n.loaderDeps):n.loaderDeps})}function pe(t){return rt({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:r=>t.select?t.select(r.params):r.params})}function me(t){return rt({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:r=>t.select?t.select(r.search):r.search})}function ve(t){const{navigate:r}=ot();return _.useCallback(e=>r({...e}),[r])}class ge{constructor(r){this.init=e=>{var n,o;this.originalIndex=e.originalIndex;const i=this.options,s=!(i!=null&&i.path)&&!(i!=null&&i.id);this.parentRoute=(o=(n=this.options).getParentRoute)==null?void 0:o.call(n),s?this._path=J:G(this.parentRoute);let a=s?J:i.path;a&&a!=="/"&&(a=At(a));const c=(i==null?void 0:i.id)||a;let l=s?J:nt([this.parentRoute.id===J?"":this.parentRoute.id,c]);a===J&&(a="/"),l!==J&&(l=nt(["/",l]));const u=l===J?"/":nt([this.parentRoute.fullPath,a]);this._path=a,this._id=l,this._fullPath=u,this._to=u,this._ssr=(i==null?void 0:i.ssr)??e.defaultSsr??!0},this.updateLoader=e=>(Object.assign(this.options,e),this),this.update=e=>(Object.assign(this.options,e),this),this.lazy=e=>(this.lazyFn=e,this),this.useMatch=e=>rt({select:e==null?void 0:e.select,from:this.id,structuralSharing:e==null?void 0:e.structuralSharing}),this.useRouteContext=e=>rt({...e,from:this.id,select:n=>e!=null&&e.select?e.select(n.context):n.context}),this.useSearch=e=>me({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.id}),this.useParams=e=>pe({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.id}),this.useLoaderDeps=e=>fe({...e,from:this.id}),this.useLoaderData=e=>he({...e,from:this.id}),this.useNavigate=()=>ve({from:this.id}),this.options=r||{},this.isRoot=!(r!=null&&r.getParentRoute),G(!(r!=null&&r.id&&(r!=null&&r.path))),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(r){return this._addFileChildren(r)}_addFileChildren(r){return Array.isArray(r)&&(this.children=r),typeof r=="object"&&r!==null&&(this.children=Object.values(r)),this}}function Rn(t){return new ge(t)}function Un(){return t=>Mn(t)}class xn extends ge{constructor(r){super(r)}addChildren(r){return super.addChildren(r),this}_addFileChildren(r){return super._addFileChildren(r),this}_addFileTypes(){return this}}function Mn(t){return new xn(t)}function Hn(t){return new En(t,{silent:!0}).createRoute}class En{constructor(r,e){this.path=r,this.createRoute=n=>{this.silent;const o=Rn(n);return o.isRoot=!1,o},this.silent=e==null?void 0:e.silent}}class In{constructor(r){this.useMatch=e=>rt({select:e==null?void 0:e.select,from:this.options.id,structuralSharing:e==null?void 0:e.structuralSharing}),this.useRouteContext=e=>rt({from:this.options.id,select:n=>e!=null&&e.select?e.select(n.context):n.context}),this.useSearch=e=>me({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.options.id}),this.useParams=e=>pe({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.options.id}),this.useLoaderDeps=e=>fe({...e,from:this.options.id}),this.useLoaderData=e=>he({...e,from:this.options.id}),this.useNavigate=()=>ve({from:this.options.id}),this.options=r,this.$$typeof=Symbol.for("react.memo")}}function Wn(t){return r=>new In({id:t,...r})}function Rt(t){return y.jsx(y.Fragment,{children:t.children})}function ye(t,r,e){return r.options.notFoundComponent?y.jsx(r.options.notFoundComponent,{data:e}):t.options.defaultNotFoundComponent?y.jsx(t.options.defaultNotFoundComponent,{data:e}):y.jsx(yn,{})}const _e=_.memo(function({matchId:r}){var e,n;const o=ot(),i=K({select:v=>{var C;return(C=v.matches.find(L=>L.id===r))==null?void 0:C.routeId}});G(i);const s=o.routesById[i],a=s.options.pendingComponent??o.options.defaultPendingComponent,c=a?y.jsx(a,{}):null,l=s.options.errorComponent??o.options.defaultErrorComponent,u=s.options.onCatch??o.options.defaultOnCatch,d=s.isRoot?s.options.notFoundComponent??((e=o.options.notFoundRoute)==null?void 0:e.options.component):s.options.notFoundComponent,h=(!s.isRoot||s.options.wrapInSuspense)&&(s.options.wrapInSuspense??a??((n=s.options.errorComponent)==null?void 0:n.preload))?_.Suspense:Rt,f=l?Vt:Rt,p=d?gn:Rt,m=K({select:v=>v.loadedAt});return y.jsx(kt.Provider,{value:r,children:y.jsx(h,{fallback:c,children:y.jsx(f,{getResetKey:()=>m,errorComponent:l||Ft,onCatch:(v,C)=>{if(Z(v))throw v;u==null||u(v,C)},children:y.jsx(p,{fallback:v=>{if(!d||v.routeId&&v.routeId!==i||!v.routeId&&!s.isRoot)throw v;return _.createElement(d,v)},children:y.jsx(Tn,{matchId:r})})})})})}),Tn=_.memo(function({matchId:r}){var e,n,o,i,s;const a=ot(),{match:c,matchIndex:l,routeId:u}=K({select:p=>{const m=p.matches.findIndex(L=>L.id===r),v=p.matches[m];return{routeId:v.routeId,matchIndex:m,match:Lt(v,["id","status","error"])}},structuralSharing:!0}),d=a.routesById[u],h=_.useMemo(()=>{const p=d.options.component??a.options.defaultComponent;return p?y.jsx(p,{}):y.jsx(Fn,{})},[d.options.component,a.options.defaultComponent]),f=(d.options.errorComponent??a.options.defaultErrorComponent)||Ft;if(c.status==="notFound"){let p;return Qt(c.error)?p=(((e=a.options.errorSerializer)==null?void 0:e.deserialize)??Zt)(c.error.data):p=c.error,G(Z(p)),ye(a,d,p)}if(c.status==="redirected")throw G(it(c.error)),(n=a.getMatch(c.id))==null?void 0:n.loadPromise;if(c.status==="error"){if(a.isServer)return y.jsx(f,{error:c.error,info:{componentStack:""}});throw Qt(c.error)?(((o=a.options.errorSerializer)==null?void 0:o.deserialize)??Zt)(c.error.data):c.error}if(c.status==="pending"){const p=d.options.pendingMinMs??a.options.defaultPendingMinMs;if(p&&!((i=a.getMatch(c.id))!=null&&i.minPendingPromise)&&!a.isServer){const m=ut();Promise.resolve().then(()=>{a.updateMatch(c.id,v=>({...v,minPendingPromise:m}))}),setTimeout(()=>{m.resolve(),a.updateMatch(c.id,v=>({...v,minPendingPromise:void 0}))},p)}throw(s=a.getMatch(c.id))==null?void 0:s.loadPromise}return y.jsxs(y.Fragment,{children:[h,a.AfterEachMatch?y.jsx(a.AfterEachMatch,{match:c,matchIndex:l}):null]})}),Fn=_.memo(function(){const r=ot(),e=_.useContext(kt),n=K({select:l=>{var u;return(u=l.matches.find(d=>d.id===e))==null?void 0:u.routeId}}),o=r.routesById[n],i=K({select:l=>{const d=l.matches.find(h=>h.id===e);return G(d),d.globalNotFound}}),s=K({select:l=>{var u;const d=l.matches,h=d.findIndex(f=>f.id===e);return(u=d[h+1])==null?void 0:u.id}});if(i)return ye(r,o,void 0);if(!s)return null;const a=y.jsx(_e,{matchId:s}),c=r.options.defaultPendingComponent?y.jsx(r.options.defaultPendingComponent,{}):null;return e===J?y.jsx(_.Suspense,{fallback:c,children:a}):a}),kn="Error preloading route! ";function jn(t,r){const e=ot(),[n,o]=_.useState(!1),i=_.useRef(!1),s=un(r),{activeProps:a=()=>({className:"active"}),inactiveProps:c=()=>({}),activeOptions:l,to:u,preload:d,preloadDelay:h,replace:f,startTransition:p,resetScroll:m,viewTransition:v,children:C,target:L,disabled:x,style:g,className:P,onClick:q,onFocus:O,onMouseEnter:z,onMouseLeave:$,onTouchStart:w,ignoreBlocker:R,...b}=t,{params:T,search:S,hash:F,state:k,mask:U,...j}=b,B=_.useMemo(()=>{try{return new URL(`${u}`),"external"}catch{}return"internal"},[u]),H=K({select:M=>M.location.search,structuralSharing:!0});t={from:rt({strict:!1,select:M=>M.pathname}),...t};const E=_.useMemo(()=>e.buildLocation(t),[e,t,H]),N=_.useMemo(()=>d??e.options.defaultPreload,[e.options.defaultPreload,d]),A=h??e.options.defaultPreloadDelay??0,I=K({select:M=>{if(l!=null&&l.exact){if(!hn(M.location.pathname,E.pathname,e.basepath))return!1}else{const D=xt(M.location.pathname,e.basepath).split("/");if(!xt(E.pathname,e.basepath).split("/").every((Se,Pe)=>Se===D[Pe]))return!1}return((l==null?void 0:l.includeSearch)??!0)&&!ht(M.location.search,E.search,{partial:!(l!=null&&l.exact),ignoreUndefined:!(l!=null&&l.explicitUndefined)})?!1:l!=null&&l.includeHash?M.location.hash===E.hash:!0}}),W=_.useCallback(()=>{e.preloadRoute(t).catch(M=>{console.warn(M),console.warn(kn)})},[t,e]),st=_.useCallback(M=>{M!=null&&M.isIntersecting&&W()},[W]);if(ln(s,st,{rootMargin:"100px"},{disabled:!!x||N!=="viewport"}),_t(()=>{i.current||!x&&N==="render"&&(W(),i.current=!0)},[x,W,N]),B==="external")return{...j,ref:s,type:B,href:u,...C&&{children:C},...L&&{target:L},...x&&{disabled:x},...g&&{style:g},...P&&{className:P},...q&&{onClick:q},...O&&{onFocus:O},...z&&{onMouseEnter:z},...$&&{onMouseLeave:$},...w&&{onTouchStart:w}};const ct=M=>{if(!x&&!On(M)&&!M.defaultPrevented&&(!L||L==="_self")&&M.button===0){M.preventDefault(),we.flushSync(()=>{o(!0)});const D=e.subscribe("onResolved",()=>{D(),o(!1)});e.buildAndCommitLocation({...t,replace:f,resetScroll:m,startTransition:p,viewTransition:v,ignoreBlocker:R})}},vt=M=>{x||N&&W()},lt=vt,V=M=>{if(x)return;const D=M.target||{};if(N){if(D.preloadTimeout)return;D.preloadTimeout=setTimeout(()=>{D.preloadTimeout=null,W()},A)}},Q=M=>{if(x)return;const D=M.target||{};D.preloadTimeout&&(clearTimeout(D.preloadTimeout),D.preloadTimeout=null)},X=M=>D=>{var jt;(jt=D.persist)==null||jt.call(D),M.filter(Boolean).forEach(Kt=>{D.defaultPrevented||Kt(D)})},gt=I?dt(a,{})??{}:{},yt=I?{}:dt(c,{}),wt=[P,gt.className,yt.className].filter(Boolean).join(" "),tt={...g,...gt.style,...yt.style};return{...j,...gt,...yt,href:x?void 0:E.maskedLocation?e.history.createHref(E.maskedLocation.href):e.history.createHref(E.href),ref:s,onClick:X([q,ct]),onFocus:X([O,vt]),onMouseEnter:X([z,V]),onMouseLeave:X([$,Q]),onTouchStart:X([w,lt]),disabled:!!x,target:L,...Object.keys(tt).length&&{style:tt},...wt&&{className:wt},...x&&{role:"link","aria-disabled":!0},...I&&{"data-status":"active","aria-current":"page"},...n&&{"data-transitioning":"transitioning"}}}const Gn=_.forwardRef((t,r)=>{const{_asChild:e,...n}=t,{type:o,ref:i,...s}=jn(n,r),a=typeof n.children=="function"?n.children({isActive:s["data-status"]==="active"}):n.children;return typeof e>"u"&&delete s.disabled,_.createElement(e||"a",{...s,ref:i},a)});function On(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $n(){const t=ot(),r=_.useRef({router:t,mounted:!1}),e=K({select:({isLoading:d})=>d}),[n,o]=_.useState(!1),i=K({select:d=>d.matches.some(h=>h.status==="pending"),structuralSharing:!0}),s=Dt(e),a=e||n||i,c=Dt(a),l=e||i,u=Dt(l);return t.isServer||(t.startReactTransition=d=>{o(!0),_.startTransition(()=>{d(),o(!1)})}),_.useEffect(()=>{const d=t.history.subscribe(t.load),h=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return at(t.latestLocation.href)!==at(h.href)&&t.commitLocation({...h,replace:!0}),()=>{d()}},[t,t.history]),_t(()=>{var d;if(typeof window<"u"&&((d=window.__TSR__)!=null&&d.dehydrated)||r.current.router===t&&r.current.mounted)return;r.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(f){console.error(f)}})()},[t]),_t(()=>{if(s&&!e){const d=t.state.location,h=t.state.resolvedLocation,f=h.pathname!==d.pathname,p=h.href!==d.href;t.emit({type:"onLoad",fromLocation:h,toLocation:d,pathChanged:f,hrefChanged:p})}},[s,t,e]),_t(()=>{if(u&&!l){const d=t.state.location,h=t.state.resolvedLocation,f=h.pathname!==d.pathname,p=h.href!==d.href;t.emit({type:"onBeforeRouteMount",fromLocation:h,toLocation:d,pathChanged:f,hrefChanged:p})}},[l,u,t]),_t(()=>{if(c&&!a){const d=t.state.location,h=t.state.resolvedLocation,f=h.pathname!==d.pathname,p=h.href!==d.href;if(t.emit({type:"onResolved",fromLocation:h,toLocation:d,pathChanged:f,hrefChanged:p}),t.__store.setState(m=>({...m,status:"idle",resolvedLocation:m.location})),typeof document<"u"&&document.querySelector&&t.state.location.hash!==""){const m=document.getElementById(t.state.location.hash);m&&m.scrollIntoView()}}},[a,c,t]),null}function Dn(){const t=ot(),r=t.options.defaultPendingComponent?y.jsx(t.options.defaultPendingComponent,{}):null,e=t.isServer||typeof document<"u"&&window.__TSR__?Rt:_.Suspense,n=y.jsxs(e,{fallback:r,children:[y.jsx($n,{}),y.jsx(zn,{})]});return t.options.InnerWrap?y.jsx(t.options.InnerWrap,{children:n}):n}function zn(){const t=K({select:e=>{var n;return(n=e.matches[0])==null?void 0:n.id}}),r=K({select:e=>e.loadedAt});return y.jsx(kt.Provider,{value:t,children:y.jsx(Vt,{getResetKey:()=>r,errorComponent:Ft,onCatch:e=>{e.message||e.toString()},children:t?y.jsx(_e,{matchId:t}):null})})}function Bn({router:t,children:r,...e}){t.update({...t.options,...e,context:{...t.options.context,...e.context}});const n=ie(),o=y.jsx(n.Provider,{value:t,children:r});return t.options.Wrap?y.jsx(t.options.Wrap,{children:o}):o}function Jn({router:t,...r}){return y.jsx(Bn,{router:t,...r,children:y.jsx(Dn,{})})}function qn(t){return K({select:r=>r.location})}export{Ft as E,Gn as L,Fn as O,Jn as R,Hn as a,ve as b,Un as c,qn as d,he as e,ot as f,An as g,Kn as h,Wn as i,y as j,Vn as r,me as u};
