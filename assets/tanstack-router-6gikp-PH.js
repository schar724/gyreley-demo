import{r as _,a as Pe}from"./vendor-BRGH1Yg5.js";var te={exports:{}},Et={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var we=_,be=Symbol.for("react.element"),Ce=Symbol.for("react.fragment"),Le=Object.prototype.hasOwnProperty,Re=we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xe={key:!0,ref:!0,__self:!0,__source:!0};function ee(t,n,e){var r,o={},i=null,s=null;e!==void 0&&(i=""+e),n.key!==void 0&&(i=""+n.key),n.ref!==void 0&&(s=n.ref);for(r in n)Le.call(n,r)&&!xe.hasOwnProperty(r)&&(o[r]=n[r]);if(t&&t.defaultProps)for(r in n=t.defaultProps,n)o[r]===void 0&&(o[r]=n[r]);return{$$typeof:be,type:t,key:i,ref:s,props:o,_owner:Re.current}}Et.Fragment=Ce;Et.jsx=ee;Et.jsxs=ee;te.exports=Et;var y=te.exports;const Ut="pushstate",Wt="popstate",re="beforeunload",ne=t=>(t.preventDefault(),t.returnValue=""),Me=()=>{removeEventListener(re,ne,{capture:!0})};function oe(t){let n=t.getLocation();const e=new Set;let r=[];const o=()=>{n=t.getLocation(),e.forEach(s=>s({location:n}))},i=async(s,a)=>{var c;if(!((a==null?void 0:a.ignoreBlocker)??!1)&&typeof document<"u"&&r.length){for(const u of r)if(!await u()){(c=t.onBlocked)==null||c.call(t,o);return}}s()};return{get location(){return n},get length(){return t.getLength()},subscribers:e,subscribe:s=>(e.add(s),()=>{e.delete(s)}),push:(s,a,c)=>{a=Ht(a),i(()=>{t.pushState(s,a),o()},c)},replace:(s,a,c)=>{a=Ht(a),i(()=>{t.replaceState(s,a),o()},c)},go:(s,a)=>{i(()=>{t.go(s),o()},a)},back:s=>{i(()=>{t.back(),o()},s)},forward:s=>{i(()=>{t.forward(),o()},s)},createHref:s=>t.createHref(s),block:s=>(r.push(s),r.length===1&&addEventListener(re,ne,{capture:!0}),()=>{r=r.filter(a=>a!==s),r.length||Me()}),flush:()=>{var s;return(s=t.flush)==null?void 0:s.call(t)},destroy:()=>{var s;return(s=t.destroy)==null?void 0:s.call(t)},notify:o}}function Ht(t){return t||(t={}),{...t,key:Te()}}function Ee(t){const n=typeof document<"u"?window:void 0,e=n.history.pushState,r=n.history.replaceState,o=m=>m,i=()=>Rt(`${n.location.pathname}${n.location.search}${n.location.hash}`,n.history.state);let s=i(),a;const c=()=>s;let l,u;const d=()=>{l&&(p._ignoreSubscribers=!0,(l.isPush?n.history.pushState:n.history.replaceState)(l.state,"",l.href),p._ignoreSubscribers=!1,l=void 0,u=void 0,a=void 0)},h=(m,v,C)=>{const L=o(v);u||(a=s),s=Rt(v,C),l={href:L,state:C,isPush:(l==null?void 0:l.isPush)||m==="push"},u||(u=Promise.resolve().then(()=>d()))},f=()=>{s=i(),p.notify()},p=oe({getLocation:c,getLength:()=>n.history.length,pushState:(m,v)=>h("push",m,v),replaceState:(m,v)=>h("replace",m,v),back:()=>n.history.back(),forward:()=>n.history.forward(),go:m=>n.history.go(m),createHref:m=>o(m),flush:d,destroy:()=>{n.history.pushState=e,n.history.replaceState=r,n.removeEventListener(Ut,f),n.removeEventListener(Wt,f)},onBlocked:m=>{a&&s!==a&&(s=a,m())}});return n.addEventListener(Ut,f),n.addEventListener(Wt,f),n.history.pushState=function(...m){const v=e.apply(n.history,m);return p._ignoreSubscribers||f(),v},n.history.replaceState=function(...m){const v=r.apply(n.history,m);return p._ignoreSubscribers||f(),v},p}function Ie(t={initialEntries:["/"]}){const n=t.initialEntries;let e=t.initialIndex??n.length-1;const r=n.map(()=>({}));return oe({getLocation:()=>Rt(n[e],r[e]),getLength:()=>n.length,pushState:(i,s)=>{e<n.length-1&&(n.splice(e+1),r.splice(e+1)),r.push(s),n.push(i),e=Math.max(n.length-1,0)},replaceState:(i,s)=>{r[e]=s,n[e]=i},back:()=>{e=Math.max(e-1,0)},forward:()=>{e=Math.min(e+1,n.length-1)},go:i=>{e=Math.min(Math.max(e+i,0),n.length-1)},createHref:i=>i})}function Rt(t,n){const e=t.indexOf("#"),r=t.indexOf("?");return{href:t,pathname:t.substring(0,e>0?r>0?Math.min(e,r):e:r>0?r:t.length),hash:e>-1?t.substring(e):"",search:r>-1?t.slice(r,e===-1?void 0:e):"",state:n||{}}}function Te(){return(Math.random()+1).toString(36).substring(7)}var Fe="Invariant failed";function G(t,n){if(!t)throw new Error(Fe)}const Ot=_.createContext(null);function se(){return typeof document>"u"?Ot:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=Ot,Ot)}function ot(t){const n=_.useContext(se());return t==null||t.warn,n}var ie={exports:{}},ae={},ce={exports:{}},le={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ft=_;function ke(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var je=typeof Object.is=="function"?Object.is:ke,Oe=ft.useState,De=ft.useEffect,$e=ft.useLayoutEffect,ze=ft.useDebugValue;function Be(t,n){var e=n(),r=Oe({inst:{value:e,getSnapshot:n}}),o=r[0].inst,i=r[1];return $e(function(){o.value=e,o.getSnapshot=n,Dt(o)&&i({inst:o})},[t,e,n]),De(function(){return Dt(o)&&i({inst:o}),t(function(){Dt(o)&&i({inst:o})})},[t]),ze(e),e}function Dt(t){var n=t.getSnapshot;t=t.value;try{var e=n();return!je(t,e)}catch{return!0}}function Ne(t,n){return n()}var Ae=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ne:Be;le.useSyncExternalStore=ft.useSyncExternalStore!==void 0?ft.useSyncExternalStore:Ae;ce.exports=le;var Ve=ce.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var It=_,Ke=Ve;function Ue(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var We=typeof Object.is=="function"?Object.is:Ue,He=Ke.useSyncExternalStore,Ge=It.useRef,Je=It.useEffect,qe=It.useMemo,Xe=It.useDebugValue;ae.useSyncExternalStoreWithSelector=function(t,n,e,r,o){var i=Ge(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=qe(function(){function c(f){if(!l){if(l=!0,u=f,f=r(f),o!==void 0&&s.hasValue){var p=s.value;if(o(p,f))return d=p}return d=f}if(p=d,We(u,f))return p;var m=r(f);return o!==void 0&&o(p,m)?(u=f,p):(u=f,d=m)}var l=!1,u,d,h=e===void 0?null:e;return[function(){return c(n())},h===null?void 0:function(){return c(h())}]},[n,e,r,o]);var a=He(t,i[0],i[1]);return Je(function(){s.hasValue=!0,s.value=a},[a]),Xe(a),a};ie.exports=ae;var Ye=ie.exports;class Qe{constructor(n,e){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=r=>{var o,i;this.listeners.add(r);const s=(i=(o=this.options)==null?void 0:o.onSubscribe)==null?void 0:i.call(o,r,this);return()=>{this.listeners.delete(r),s==null||s()}},this.setState=r=>{var o,i,s;const a=this.state;this.state=(o=this.options)!=null&&o.updateFn?this.options.updateFn(a)(r):r(a),(s=(i=this.options)==null?void 0:i.onUpdate)==null||s.call(i),this._flush()},this._flush=()=>{if(this._batching)return;const r=++this._flushing;this.listeners.forEach(o=>{this._flushing===r&&o()})},this.batch=r=>{if(this._batching)return r();this._batching=!0,r(),this._batching=!1,this._flush()},this.state=n,this.options=e}}function Ze(t,n=e=>e){return Ye.useSyncExternalStoreWithSelector(t.subscribe,()=>t.state,()=>t.state,n,tr)}function tr(t,n){if(Object.is(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(const[r,o]of t)if(!n.has(r)||!Object.is(o,n.get(r)))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(const r of t)if(!n.has(r))return!1;return!0}const e=Object.keys(t);if(e.length!==Object.keys(n).length)return!1;for(let r=0;r<e.length;r++)if(!Object.prototype.hasOwnProperty.call(n,e[r])||!Object.is(t[e[r]],n[e[r]]))return!1;return!0}const J="__root__";function er(t,n){let e,r,o,i="";for(e in t)if((o=t[e])!==void 0)if(Array.isArray(o))for(r=0;r<o.length;r++)i&&(i+="&"),i+=encodeURIComponent(e)+"="+encodeURIComponent(o[r]);else i&&(i+="&"),i+=encodeURIComponent(e)+"="+encodeURIComponent(o);return""+i}function Gt(t){if(!t)return"";const n=decodeURIComponent(t);return n==="false"?!1:n==="true"?!0:+n*0===0&&+n+""===n?+n:n}function rr(t,n){let e,r;const o={},i=t.split("&");for(;e=i.shift();){const s=e.indexOf("=");if(s!==-1){r=e.slice(0,s),r=decodeURIComponent(r);const a=e.slice(s+1);o[r]!==void 0?o[r]=[].concat(o[r],Gt(a)):o[r]=Gt(a)}else r=e,r=decodeURIComponent(r),o[r]=""}return o}const nr=sr(JSON.parse),or=ir(JSON.stringify,JSON.parse);function sr(t){return n=>{n.substring(0,1)==="?"&&(n=n.substring(1));const e=rr(n);for(const r in e){const o=e[r];if(typeof o=="string")try{e[r]=t(o)}catch{}}return e}}function ir(t,n){function e(r){if(typeof r=="object"&&r!==null)try{return t(r)}catch{}else if(typeof r=="string"&&typeof n=="function")try{return n(r),t(r)}catch{}return r}return r=>{r={...r},Object.keys(r).forEach(i=>{const s=r[i];typeof s>"u"||s===void 0?delete r[i]:r[i]=e(s)});const o=er(r).toString();return o?`?${o}`:""}}function St(t){return t[t.length-1]}function ar(t){return typeof t=="function"}function dt(t,n){return ar(t)?t(n):t}function Ct(t,n){return n.reduce((e,r)=>(e[r]=t[r],e),{})}function Y(t,n){if(t===n)return t;const e=n,r=qt(t)&&qt(e);if(r||pt(t)&&pt(e)){const o=r?t:Object.keys(t),i=o.length,s=r?e:Object.keys(e),a=s.length,c=r?[]:{};let l=0;for(let u=0;u<a;u++){const d=r?u:s[u];(!r&&o.includes(d)||r)&&t[d]===void 0&&e[d]===void 0?(c[d]=void 0,l++):(c[d]=Y(t[d],e[d]),c[d]===t[d]&&t[d]!==void 0&&l++)}return i===a&&l===i?t:c}return e}function pt(t){if(!Jt(t))return!1;const n=t.constructor;if(typeof n>"u")return!0;const e=n.prototype;return!(!Jt(e)||!e.hasOwnProperty("isPrototypeOf"))}function Jt(t){return Object.prototype.toString.call(t)==="[object Object]"}function qt(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Xt(t,n){let e=Object.keys(t);return n&&(e=e.filter(r=>t[r]!==void 0)),e}function ht(t,n,e){if(t===n)return!0;if(typeof t!=typeof n)return!1;if(pt(t)&&pt(n)){const r=(e==null?void 0:e.ignoreUndefined)??!0,o=Xt(t,r),i=Xt(n,r);return!(e!=null&&e.partial)&&o.length!==i.length?!1:i.every(s=>ht(t[s],n[s],e))}return Array.isArray(t)&&Array.isArray(n)?t.length!==n.length?!1:!t.some((r,o)=>!ht(r,n[o],e)):!1}const _t=typeof window<"u"?_.useLayoutEffect:_.useEffect;function ut(t){let n,e;const r=new Promise((o,i)=>{n=o,e=i});return r.status="pending",r.resolve=o=>{r.status="resolved",r.value=o,n(o),t==null||t(o)},r.reject=o=>{r.status="rejected",e(o)},r}function $t(t){const n=_.useRef({value:t,prev:null}),e=n.current.value;return t!==e&&(n.current={value:t,prev:e}),n.current.prev}function cr(t,n,e={},r={}){const o=_.useRef(typeof IntersectionObserver=="function"),i=_.useRef(null);return _.useEffect(()=>{if(!(!t.current||!o.current||r.disabled))return i.current=new IntersectionObserver(([s])=>{n(s)},e),i.current.observe(t.current),()=>{var s;(s=i.current)==null||s.disconnect()}},[n,e,r.disabled,t]),i.current}function lr(t){const n=_.useRef(null);return _.useEffect(()=>{t&&(typeof t=="function"?t(n.current):t.current=n.current)}),n}function rt(t){return Tt(t.filter(n=>n!==void 0).join("/"))}function Tt(t){return t.replace(/\/{2,}/g,"/")}function At(t){return t==="/"?t:t.replace(/^\/{1,}/,"")}function at(t){return t==="/"?t:t.replace(/\/{1,}$/,"")}function ur(t){return at(At(t))}function xt(t,n){return t.endsWith("/")&&t!=="/"&&t!==`${n}/`?t.slice(0,-1):t}function dr(t,n,e){return xt(t,e)===xt(n,e)}function hr({basepath:t,base:n,to:e,trailingSlash:r="never",caseSensitive:o}){var i,s;n=Mt(t,n,o),e=Mt(t,e,o);let a=mt(n);const c=mt(e);a.length>1&&((i=St(a))==null?void 0:i.value)==="/"&&a.pop(),c.forEach((u,d)=>{u.value==="/"?d?d===c.length-1&&a.push(u):a=[u]:u.value===".."?a.pop():u.value==="."||a.push(u)}),a.length>1&&(((s=St(a))==null?void 0:s.value)==="/"?r==="never"&&a.pop():r==="always"&&a.push({type:"pathname",value:"/"}));const l=rt([t,...a.map(u=>u.value)]);return Tt(l)}function mt(t){if(!t)return[];t=Tt(t);const n=[];if(t.slice(0,1)==="/"&&(t=t.substring(1),n.push({type:"pathname",value:"/"})),!t)return n;const e=t.split("/").filter(Boolean);return n.push(...e.map(r=>r==="$"||r==="*"?{type:"wildcard",value:r}:r.charAt(0)==="$"?{type:"param",value:r}:{type:"pathname",value:decodeURI(r)})),t.slice(-1)==="/"&&(t=t.substring(1),n.push({type:"pathname",value:"/"})),n}function wt({path:t,params:n,leaveWildcards:e,leaveParams:r,decodeCharMap:o}){const i=mt(t),s={};for(const[a,c]of Object.entries(n)){const l=typeof c=="string";["*","_splat"].includes(a)?s[a]=l?encodeURI(c):c:s[a]=l?fr(c,o):c}return rt(i.map(a=>{if(a.type==="wildcard"){const c=s._splat;return e?`${a.value}${c??""}`:c}if(a.type==="param"){if(r){const c=s[a.value];return`${a.value}${c??""}`}return s[a.value.substring(1)]??"undefined"}return a.value}))}function fr(t,n){let e=encodeURIComponent(t);if(n)for(const[r,o]of n)e=e.replaceAll(r,o);return e}function bt(t,n,e){const r=pr(t,n,e);if(!(e.to&&!r))return r??{}}function Mt(t,n,e=!1){const r=e?t:t.toLowerCase(),o=e?n:n.toLowerCase();switch(!0){case r==="/":return n;case o===r:return"";case n.length<t.length:return n;case o[r.length]!=="/":return n;case o.startsWith(r):return n.slice(t.length);default:return n}}function pr(t,n,e){if(t!=="/"&&!n.startsWith(t))return;n=Mt(t,n,e.caseSensitive);const r=Mt(t,`${e.to??"$"}`,e.caseSensitive),o=mt(n),i=mt(r);n.startsWith("/")||o.unshift({type:"pathname",value:"/"}),r.startsWith("/")||i.unshift({type:"pathname",value:"/"});const s={};return(()=>{for(let c=0;c<Math.max(o.length,i.length);c++){const l=o[c],u=i[c],d=c>=o.length-1,h=c>=i.length-1;if(u){if(u.type==="wildcard"){const f=decodeURI(rt(o.slice(c).map(p=>p.value)));return s["*"]=f,s._splat=f,!0}if(u.type==="pathname"){if(u.value==="/"&&!(l!=null&&l.value))return!0;if(l){if(e.caseSensitive){if(u.value!==l.value)return!1}else if(u.value.toLowerCase()!==l.value.toLowerCase())return!1}}if(!l)return!1;if(u.type==="param"){if(l.value==="/")return!1;l.value.charAt(0)!=="$"&&(s[u.value.substring(1)]=decodeURIComponent(l.value))}}if(!d&&h)return s["**"]=rt(o.slice(c+1).map(f=>f.value)),!!e.fuzzy&&(u==null?void 0:u.value)!=="/"}return!0})()?s:void 0}function Nr(t){if(t.isRedirect=!0,t.statusCode=t.statusCode||t.code||307,t.headers=t.headers||{},t.throw)throw t;return t}function it(t){return!!(t!=null&&t.isRedirect)}function zt(t){return!!(t!=null&&t.isRedirect)&&t.href}function Vt(t){const n=t.errorComponent??Ft;return y.jsx(mr,{getResetKey:t.getResetKey,onCatch:t.onCatch,children:({error:e,reset:r})=>e?_.createElement(n,{error:e,reset:r}):t.children})}class mr extends _.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromProps(n){return{resetKey:n.getResetKey()}}static getDerivedStateFromError(n){return{error:n}}reset(){this.setState({error:null})}componentDidUpdate(n,e){e.error&&e.resetKey!==this.state.resetKey&&this.reset()}componentDidCatch(n,e){this.props.onCatch&&this.props.onCatch(n,e)}render(){return this.props.children({error:this.state.resetKey!==this.props.getResetKey()?null:this.state.error,reset:()=>{this.reset()}})}}function Ft({error:t}){const[n,e]=_.useState(!1);return y.jsxs("div",{style:{padding:".5rem",maxWidth:"100%"},children:[y.jsxs("div",{style:{display:"flex",alignItems:"center",gap:".5rem"},children:[y.jsx("strong",{style:{fontSize:"1rem"},children:"Something went wrong!"}),y.jsx("button",{style:{appearance:"none",fontSize:".6em",border:"1px solid currentColor",padding:".1rem .2rem",fontWeight:"bold",borderRadius:".25rem"},onClick:()=>e(r=>!r),children:n?"Hide Error":"Show Error"})]}),y.jsx("div",{style:{height:".25rem"}}),n?y.jsx("div",{children:y.jsx("pre",{style:{fontSize:".7em",border:"1px solid red",borderRadius:".25rem",padding:".3rem",color:"red",overflow:"auto"},children:t.message?y.jsx("code",{children:t.message}):null})}):null]})}function K(t){const n=ot({warn:(t==null?void 0:t.router)===void 0}),e=(t==null?void 0:t.router)||n,r=_.useRef();return Ze(e.__store,o=>{if(t!=null&&t.select){if(t.structuralSharing??e.options.defaultStructuralSharing){const i=Y(r.current,t.select(o));return r.current=i,i}return t.select(o)}return o})}function Z(t){return!!(t!=null&&t.isNotFound)}function vr(t){const n=K({select:e=>`not-found-${e.location.pathname}-${e.status}`});return y.jsx(Vt,{getResetKey:()=>n,onCatch:(e,r)=>{var o;if(Z(e))(o=t.onCatch)==null||o.call(t,e,r);else throw e},errorComponent:({error:e})=>{var r;if(Z(e))return(r=t.fallback)==null?void 0:r.call(t,e);throw e},children:t.children})}function gr(){return y.jsx("p",{children:"Not Found"})}const yr={stringify:t=>JSON.stringify(t,function(e,r){const o=this[e],i=Yt.find(s=>s.stringifyCondition(o));return i?i.stringify(o):r}),parse:t=>JSON.parse(t,function(e,r){const o=this[e],i=Yt.find(s=>s.parseCondition(o));return i?i.parse(o):r})},Yt=[{stringifyCondition:t=>t instanceof Date,stringify:t=>({$date:t.toISOString()}),parseCondition:t=>pt(t)&&t.$date,parse:t=>new Date(t.$date)},{stringifyCondition:t=>t===void 0,stringify:()=>({$undefined:""}),parseCondition:t=>pt(t)&&t.$undefined==="",parse:()=>{}}],ue=["component","errorComponent","pendingComponent","notFoundComponent"];function _r(t){var n;for(const e of ue)if((n=t.options[e])!=null&&n.preload)return!0;return!1}function Bt(t,n){if(t==null)return{};if("~standard"in t){const e=t["~standard"].validate(n);if(e instanceof Promise)throw new Nt("Async validation not supported");if(e.issues)throw new Nt(JSON.stringify(e.issues,void 0,2));return e.value}return"parse"in t?t.parse(n):typeof t=="function"?t(n):{}}function Ar(t){return new Sr(t)}class Sr{constructor(n){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.startReactTransition=e=>e(),this.update=e=>{var r;e.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/guide/not-found-errors#migrating-from-notfoundroute for more info.");const o=this.options;this.options={...this.options,...e},this.isServer=this.options.isServer??typeof document>"u",this.pathParamsDecodeCharMap=this.options.pathParamsAllowedCharacters?new Map(this.options.pathParamsAllowedCharacters.map(i=>[encodeURIComponent(i),i])):void 0,(!this.basepath||e.basepath&&e.basepath!==o.basepath)&&(e.basepath===void 0||e.basepath===""||e.basepath==="/"?this.basepath="/":this.basepath=`/${ur(e.basepath)}`),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.history=this.options.history??(this.isServer?Ie({initialEntries:[this.basepath||"/"]}):Ee()),this.latestLocation=this.parseLocation()),this.options.routeTree!==this.routeTree&&(this.routeTree=this.options.routeTree,this.buildRouteTree()),this.__store||(this.__store=new Qe(wr(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(i=>!["redirected"].includes(i.status))}}})),typeof window<"u"&&"CSS"in window&&typeof((r=window.CSS)==null?void 0:r.supports)=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.buildRouteTree=()=>{this.routesById={},this.routesByPath={};const e=this.options.notFoundRoute;e&&(e.init({originalIndex:99999999999,defaultSsr:this.options.defaultSsr}),this.routesById[e.id]=e);const r=s=>{s.forEach((a,c)=>{a.init({originalIndex:c,defaultSsr:this.options.defaultSsr});const l=this.routesById[a.id];if(G(!l,`Duplicate routes found with id: ${String(a.id)}`),this.routesById[a.id]=a,!a.isRoot&&a.path){const d=at(a.fullPath);(!this.routesByPath[d]||a.fullPath.endsWith("/"))&&(this.routesByPath[d]=a)}const u=a.children;u!=null&&u.length&&r(u)})};r([this.routeTree]);const o=[];Object.values(this.routesById).forEach((s,a)=>{var c;if(s.isRoot||!s.path)return;const l=At(s.fullPath),u=mt(l);for(;u.length>1&&((c=u[0])==null?void 0:c.value)==="/";)u.shift();const d=u.map(h=>h.value==="/"?.75:h.type==="param"?.5:h.type==="wildcard"?.25:1);o.push({child:s,trimmed:l,parsed:u,index:a,scores:d})}),this.flatRoutes=o.sort((s,a)=>{const c=Math.min(s.scores.length,a.scores.length);for(let l=0;l<c;l++)if(s.scores[l]!==a.scores[l])return a.scores[l]-s.scores[l];if(s.scores.length!==a.scores.length)return a.scores.length-s.scores.length;for(let l=0;l<c;l++)if(s.parsed[l].value!==a.parsed[l].value)return s.parsed[l].value>a.parsed[l].value?1:-1;return s.index-a.index}).map((s,a)=>(s.child.rank=a,s.child))},this.subscribe=(e,r)=>{const o={eventType:e,fn:r};return this.subscribers.add(o),()=>{this.subscribers.delete(o)}},this.emit=e=>{this.subscribers.forEach(r=>{r.eventType===e.type&&r.fn(e)})},this.parseLocation=e=>{const r=({pathname:a,search:c,hash:l,state:u})=>{const d=this.options.parseSearch(c),h=this.options.stringifySearch(d);return{pathname:a,searchStr:h,search:Y(e==null?void 0:e.search,d),hash:l.split("#").reverse()[0]??"",href:`${a}${h}${l}`,state:Y(e==null?void 0:e.state,u)}},o=r(this.history.location),{__tempLocation:i,__tempKey:s}=o.state;if(i&&(!s||s===this.tempLocationKey)){const a=r(i);return a.state.key=o.state.key,delete a.state.__tempLocation,{...a,maskedLocation:o}}return o},this.resolvePathWithBase=(e,r)=>hr({basepath:this.basepath,base:e,to:Tt(r),trailingSlash:this.options.trailingSlash,caseSensitive:this.options.caseSensitive}),this.getMatchedRoutes=(e,r)=>{let o={};const i=at(e.pathname),s=u=>bt(this.basepath,i,{to:u.fullPath,caseSensitive:u.options.caseSensitive??this.options.caseSensitive,fuzzy:!0});let a=(r==null?void 0:r.to)!==void 0?this.routesByPath[r.to]:void 0;a?o=s(a):a=this.flatRoutes.find(u=>{const d=s(u);return d?(o=d,!0):!1});let c=a||this.routesById[J];const l=[c];for(;c.parentRoute;)c=c.parentRoute,l.unshift(c);return{matchedRoutes:l,routeParams:o,foundRoute:a}},this.cancelMatch=e=>{const r=this.getMatch(e);r&&(r.abortController.abort(),clearTimeout(r.pendingTimeout))},this.cancelMatches=()=>{var e;(e=this.state.pendingMatches)==null||e.forEach(r=>{this.cancelMatch(r.id)})},this.buildLocation=e=>{const r=(i={},s)=>{var a,c,l,u,d,h;const f=i._fromLocation?this.matchRoutes(i._fromLocation,{_buildLocation:!0}):this.state.matches,p=i.from!=null?f.find(R=>bt(this.basepath,at(R.pathname),{to:i.from,caseSensitive:!1,fuzzy:!1})):void 0,m=(p==null?void 0:p.pathname)||this.latestLocation.pathname;G(i.from==null||p!=null,"Could not find match for from: "+i.from);const v=(a=this.state.pendingMatches)!=null&&a.length?(c=St(this.state.pendingMatches))==null?void 0:c.search:((l=St(f))==null?void 0:l.search)||this.latestLocation.search,C=s==null?void 0:s.matchedRoutes.filter(R=>f.find(b=>b.routeId===R.id));let L;if(i.to)L=this.resolvePathWithBase(m,`${i.to}`);else{const R=this.routesById[(u=C==null?void 0:C.find(b=>{const T=wt({path:b.fullPath,params:(s==null?void 0:s.routeParams)??{},decodeCharMap:this.pathParamsDecodeCharMap});return rt([this.basepath,T])===m}))==null?void 0:u.id];L=this.resolvePathWithBase(m,(R==null?void 0:R.to)??m)}const x={...(d=St(f))==null?void 0:d.params};let g=(i.params??!0)===!0?x:{...x,...dt(i.params,x)};Object.keys(g).length>0&&(s==null||s.matchedRoutes.map(R=>{var b;return((b=R.options.params)==null?void 0:b.stringify)??R.options.stringifyParams}).filter(Boolean).forEach(R=>{g={...g,...R(g)}})),L=wt({path:L,params:g??{},leaveWildcards:!1,leaveParams:e.leaveParams,decodeCharMap:this.pathParamsDecodeCharMap});let P=v;if(e._includeValidateSearch&&((h=this.options.search)!=null&&h.strict)){let R={};s==null||s.matchedRoutes.forEach(b=>{try{b.options.validateSearch&&(R={...R,...Bt(b.options.validateSearch,{...R,...P})??{}})}catch{}}),P=R}P=(R=>{const b=(s==null?void 0:s.matchedRoutes.reduce((F,k)=>{var U;const j=[];if("search"in k.options)(U=k.options.search)!=null&&U.middlewares&&j.push(...k.options.search.middlewares);else if(k.options.preSearchFilters||k.options.postSearchFilters){const B=({search:W,next:et})=>{let E=W;"preSearchFilters"in k.options&&k.options.preSearchFilters&&(E=k.options.preSearchFilters.reduce((A,I)=>I(A),W));const N=et(E);return"postSearchFilters"in k.options&&k.options.postSearchFilters?k.options.postSearchFilters.reduce((A,I)=>I(A),N):N};j.push(B)}if(e._includeValidateSearch&&k.options.validateSearch){const B=({search:W,next:et})=>{try{const E=et(W);return{...E,...Bt(k.options.validateSearch,E)??{}}}catch{}};j.push(B)}return F.concat(j)},[]))??[],T=({search:F})=>i.search?i.search===!0?F:dt(i.search,F):{};b.push(T);const S=(F,k)=>{if(F>=b.length)return k;const U=b[F];return U({search:k,next:B=>S(F+1,B)})};return S(0,R)})(P),P=Y(v,P);const O=this.options.stringifySearch(P),z=i.hash===!0?this.latestLocation.hash:i.hash?dt(i.hash,this.latestLocation.hash):void 0,D=z?`#${z}`:"";let w=i.state===!0?this.latestLocation.state:i.state?dt(i.state,this.latestLocation.state):{};return w=Y(this.latestLocation.state,w),{pathname:L,search:P,searchStr:O,state:w,hash:z??"",href:`${L}${O}${D}`,unmaskOnReload:i.unmaskOnReload}},o=(i={},s)=>{var a;const c=r(i);let l=s?r(s):void 0;if(!l){let h={};const f=(a=this.options.routeMasks)==null?void 0:a.find(p=>{const m=bt(this.basepath,c.pathname,{to:p.from,caseSensitive:!1,fuzzy:!1});return m?(h=m,!0):!1});if(f){const{from:p,...m}=f;s={...Ct(e,["from"]),...m,params:h},l=r(s)}}const u=this.getMatchedRoutes(c,i),d=r(i,u);if(l){const h=this.getMatchedRoutes(l,s),f=r(s,h);d.maskedLocation=f}return d};return e.mask?o(e,{...Ct(e,["from"]),...e.mask}):o(e)},this.commitLocation=({viewTransition:e,ignoreBlocker:r,...o})=>{const i=()=>{o.state.key=this.latestLocation.state.key;const c=ht(o.state,this.latestLocation.state);return delete o.state.key,c},s=this.latestLocation.href===o.href,a=this.commitLocationPromise;if(this.commitLocationPromise=ut(()=>{a==null||a.resolve()}),s&&i())this.load();else{let{maskedLocation:c,...l}=o;c&&(l={...c,state:{...c.state,__tempKey:void 0,__tempLocation:{...l,search:l.searchStr,state:{...l.state,__tempKey:void 0,__tempLocation:void 0,key:void 0}}}},(l.unmaskOnReload??this.options.unmaskOnReload??!1)&&(l.state.__tempKey=this.tempLocationKey)),this.shouldViewTransition=e,this.history[o.replace?"replace":"push"](l.href,l.state,{ignoreBlocker:r})}return this.resetNextScroll=o.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:e,resetScroll:r,viewTransition:o,ignoreBlocker:i,...s}={})=>{const a=s.href;if(a){const l=Rt(a,{});s.to=l.pathname,s.search=this.options.parseSearch(l.search),s.hash=l.hash.slice(1)}const c=this.buildLocation({...s,_includeValidateSearch:!0});return this.commitLocation({...c,viewTransition:o,replace:e,resetScroll:r,ignoreBlocker:i})},this.navigate=({to:e,...r})=>{const o=String(e);let i;try{new URL(`${o}`),i=!0}catch{}return G(!i),this.buildAndCommitLocation({...r,to:e})},this.load=async()=>{this.latestLocation=this.parseLocation(this.latestLocation);let e,r,o;for(o=new Promise(i=>{this.startReactTransition(async()=>{var s;try{const a=this.latestLocation,c=this.state.resolvedLocation,l=c.href!==a.href,u=c.pathname!==a.pathname;this.cancelMatches();let d;this.__store.batch(()=>{d=this.matchRoutes(a),this.__store.setState(h=>({...h,status:"pending",isLoading:!0,location:a,pendingMatches:d,cachedMatches:h.cachedMatches.filter(f=>!d.find(p=>p.id===f.id))}))}),this.state.redirect||this.emit({type:"onBeforeNavigate",fromLocation:c,toLocation:a,pathChanged:u,hrefChanged:l}),this.emit({type:"onBeforeLoad",fromLocation:c,toLocation:a,pathChanged:u,hrefChanged:l}),await this.loadMatches({matches:d,location:a,onReady:async()=>{this.startViewTransition(async()=>{let h,f,p;this.__store.batch(()=>{this.__store.setState(m=>{const v=m.matches,C=m.pendingMatches||m.matches;return h=v.filter(L=>!C.find(x=>x.id===L.id)),f=C.filter(L=>!v.find(x=>x.id===L.id)),p=v.filter(L=>C.find(x=>x.id===L.id)),{...m,isLoading:!1,loadedAt:Date.now(),matches:C,pendingMatches:void 0,cachedMatches:[...m.cachedMatches,...h.filter(L=>L.status!=="error")]}}),this.clearExpiredCache()}),[[h,"onLeave"],[f,"onEnter"],[p,"onStay"]].forEach(([m,v])=>{m.forEach(C=>{var L,x;(x=(L=this.looseRoutesById[C.routeId].options)[v])==null||x.call(L,C)})})})}})}catch(a){zt(a)?(e=a,this.isServer||this.navigate({...a,replace:!0,ignoreBlocker:!0})):Z(a)&&(r=a),this.__store.setState(c=>({...c,statusCode:e?e.statusCode:r?404:c.matches.some(l=>l.status==="error")?500:200,redirect:e}))}this.latestLoadPromise===o&&((s=this.commitLocationPromise)==null||s.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),i()})}),this.latestLoadPromise=o,await o;this.latestLoadPromise&&o!==this.latestLoadPromise;)await this.latestLoadPromise},this.startViewTransition=e=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(delete this.shouldViewTransition,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let o;typeof r=="object"&&this.isViewTransitionTypesSupported?o={update:e,types:r.types}:o=e,document.startViewTransition(o)}else e()},this.updateMatch=(e,r)=>{var o;let i;const s=(o=this.state.pendingMatches)==null?void 0:o.find(u=>u.id===e),a=this.state.matches.find(u=>u.id===e),c=this.state.cachedMatches.find(u=>u.id===e),l=s?"pendingMatches":a?"matches":c?"cachedMatches":"";return l&&this.__store.setState(u=>{var d;return{...u,[l]:(d=u[l])==null?void 0:d.map(h=>h.id===e?i=r(h):h)}}),i},this.getMatch=e=>[...this.state.cachedMatches,...this.state.pendingMatches??[],...this.state.matches].find(r=>r.id===e),this.loadMatches=async({location:e,matches:r,preload:o,onReady:i,updateMatch:s=this.updateMatch})=>{let a,c=!1;const l=async()=>{c||(c=!0,await(i==null?void 0:i()))},u=h=>!!(o&&!this.state.matches.find(f=>f.id===h));!this.isServer&&!this.state.matches.length&&l();const d=(h,f)=>{var p,m,v;if(zt(f))throw f;if(it(f)||Z(f)){if(s(h.id,C=>({...C,status:it(f)?"redirected":Z(f)?"notFound":"error",isFetching:!1,error:f,beforeLoadPromise:void 0,loaderPromise:void 0})),f.routeId||(f.routeId=h.routeId),(p=h.beforeLoadPromise)==null||p.resolve(),(m=h.loaderPromise)==null||m.resolve(),(v=h.loadPromise)==null||v.resolve(),it(f))throw c=!0,f=this.resolveRedirect({...f,_fromLocation:e}),f;if(Z(f))throw this._handleNotFound(r,f,{updateMatch:s}),f}};try{await new Promise((h,f)=>{(async()=>{var p,m,v;try{const C=(g,P,q)=>{var O,z;const{id:D,routeId:w}=r[g],R=this.looseRoutesById[w];if(P instanceof Promise)throw P;P.routerCode=q,a=a??g,d(this.getMatch(D),P);try{(z=(O=R.options).onError)==null||z.call(O,P)}catch(b){P=b,d(this.getMatch(D),P)}s(D,b=>{var T,S;return(T=b.beforeLoadPromise)==null||T.resolve(),(S=b.loadPromise)==null||S.resolve(),{...b,error:P,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController,beforeLoadPromise:void 0}})};for(const[g,{id:P,routeId:q}]of r.entries()){const O=this.getMatch(P),z=(p=r[g-1])==null?void 0:p.id,D=this.looseRoutesById[q],w=D.options.pendingMs??this.options.defaultPendingMs,R=!!(i&&!this.isServer&&!u(P)&&(D.options.loader||D.options.beforeLoad)&&typeof w=="number"&&w!==1/0&&(D.options.pendingComponent??this.options.defaultPendingComponent));let b=!0;if((O.beforeLoadPromise||O.loaderPromise)&&(R&&setTimeout(()=>{try{l()}catch{}},w),await O.beforeLoadPromise,b=this.getMatch(P).status!=="success"),b){try{s(P,I=>({...I,loadPromise:ut(()=>{var H;(H=I.loadPromise)==null||H.resolve()}),beforeLoadPromise:ut()}));const T=new AbortController;let S;R&&(S=setTimeout(()=>{try{l()}catch{}},w));const{paramsError:F,searchError:k}=this.getMatch(P);F&&C(g,F,"PARSE_PARAMS"),k&&C(g,k,"VALIDATE_SEARCH");const U=()=>z?this.getMatch(z).context:this.options.context??{};s(P,I=>({...I,isFetching:"beforeLoad",fetchCount:I.fetchCount+1,abortController:T,pendingTimeout:S,context:{...U(),...I.__routeContext,...I.__beforeLoadContext}}));const{search:j,params:B,context:W,cause:et}=this.getMatch(P),E=u(P),N={search:j,abortController:T,params:B,preload:E,context:W,location:e,navigate:I=>this.navigate({...I,_fromLocation:e}),buildLocation:this.buildLocation,cause:E?"preload":et,matches:r};let A=await((v=(m=D.options).beforeLoad)==null?void 0:v.call(m,N))??{};this.serializeLoaderData&&(A=this.serializeLoaderData("__beforeLoadContext",A,{router:this,match:this.getMatch(P)})),(it(A)||Z(A))&&C(g,A,"BEFORE_LOAD"),s(P,I=>({...I,__beforeLoadContext:A,context:{...U(),...I.__routeContext,...A},abortController:T}))}catch(T){C(g,T,"BEFORE_LOAD")}s(P,T=>{var S;return(S=T.beforeLoadPromise)==null||S.resolve(),{...T,beforeLoadPromise:void 0,isFetching:!1}})}}const L=r.slice(0,a),x=[];L.forEach(({id:g,routeId:P},q)=>{x.push((async()=>{const{loaderPromise:O}=this.getMatch(g);let z=!1;if(O)await O;else{const D=x[q-1],w=this.looseRoutesById[P],R=()=>{const{params:E,loaderDeps:N,abortController:A,context:I,cause:H}=this.getMatch(g),st=u(g);return{params:E,deps:N,preload:!!st,parentMatchPromise:D,abortController:A,context:I,location:e,navigate:ct=>this.navigate({...ct,_fromLocation:e}),cause:st?"preload":H,route:w}},b=Date.now()-this.getMatch(g).updatedAt,T=u(g),S=T?w.options.preloadStaleTime??this.options.defaultPreloadStaleTime??3e4:w.options.staleTime??this.options.defaultStaleTime??0,F=w.options.shouldReload,k=typeof F=="function"?F(R()):F;s(g,E=>({...E,loaderPromise:ut(),preload:!!T&&!this.state.matches.find(N=>N.id===g)}));const U=async()=>{var E,N,A,I,H,st,ct,vt;try{const lt=async()=>{const V=this.getMatch(g);V.minPendingPromise&&await V.minPendingPromise};try{w._lazyPromise===void 0&&(w.lazyFn?w._lazyPromise=w.lazyFn().then(tt=>{const{id:M,...$}=tt.options;Object.assign(w.options,$)}):w._lazyPromise=Promise.resolve()),w._componentsPromise===void 0&&(w._componentsPromise=w._lazyPromise.then(()=>Promise.all(ue.map(async tt=>{const M=w.options[tt];M!=null&&M.preload&&await M.preload()})))),s(g,tt=>({...tt,isFetching:"loader"}));let V=await((N=(E=w.options).loader)==null?void 0:N.call(E,R()));this.serializeLoaderData&&(V=this.serializeLoaderData("loaderData",V,{router:this,match:this.getMatch(g)})),d(this.getMatch(g),V),await w._lazyPromise,await lt();const Q=(I=(A=w.options).head)==null?void 0:I.call(A,{matches:r,match:this.getMatch(g),params:this.getMatch(g).params,loaderData:V}),X=Q==null?void 0:Q.meta,gt=Q==null?void 0:Q.links,yt=Q==null?void 0:Q.scripts,Pt=(st=(H=w.options).headers)==null?void 0:st.call(H,{loaderData:V});s(g,tt=>({...tt,error:void 0,status:"success",isFetching:!1,updatedAt:Date.now(),loaderData:V,meta:X,links:gt,scripts:yt,headers:Pt}))}catch(V){let Q=V;await lt(),d(this.getMatch(g),V);try{(vt=(ct=w.options).onError)==null||vt.call(ct,V)}catch(X){Q=X,d(this.getMatch(g),X)}s(g,X=>({...X,error:Q,status:"error",isFetching:!1}))}await w._componentsPromise}catch(lt){s(g,V=>({...V,loaderPromise:void 0})),d(this.getMatch(g),lt)}},{status:j,invalid:B}=this.getMatch(g);z=j==="success"&&(B||(k??b>S)),T&&w.options.preload===!1||(z?(async()=>{try{await U()}catch(E){zt(E)&&await this.navigate(E)}})():j!=="success"&&await U());const{loaderPromise:W,loadPromise:et}=this.getMatch(g);W==null||W.resolve(),et==null||et.resolve()}return s(g,D=>({...D,isFetching:z?D.isFetching:!1,loaderPromise:void 0,invalid:!1})),this.getMatch(g)})())}),await Promise.all(x),h()}catch(C){f(C)}})()}),await l()}catch(h){if(it(h)||Z(h))throw Z(h)&&!o&&await l(),h}return r},this.invalidate=e=>{const r=o=>{var i;return((i=e==null?void 0:e.filter)==null?void 0:i.call(e,o))??!0?{...o,invalid:!0,...o.status==="error"?{status:"pending",error:void 0}:{}}:o};return this.__store.setState(o=>{var i;return{...o,matches:o.matches.map(r),cachedMatches:o.cachedMatches.map(r),pendingMatches:(i=o.pendingMatches)==null?void 0:i.map(r)}}),this.load()},this.resolveRedirect=e=>{const r=e;return r.href||(r.href=this.buildLocation(r).href),r},this.clearCache=e=>{const r=e==null?void 0:e.filter;r!==void 0?this.__store.setState(o=>({...o,cachedMatches:o.cachedMatches.filter(i=>!r(i))})):this.__store.setState(o=>({...o,cachedMatches:[]}))},this.clearExpiredCache=()=>{const e=r=>{const o=this.looseRoutesById[r.routeId];if(!o.options.loader)return!0;const i=(r.preload?o.options.preloadGcTime??this.options.defaultPreloadGcTime:o.options.gcTime??this.options.defaultGcTime)??5*60*1e3;return!(r.status!=="error"&&Date.now()-r.updatedAt<i)};this.clearCache({filter:e})},this.preloadRoute=async e=>{const r=this.buildLocation(e);let o=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:e});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(a=>a.id)),s=new Set([...i,...this.state.cachedMatches.map(a=>a.id)]);this.__store.batch(()=>{o.forEach(a=>{s.has(a.id)||this.__store.setState(c=>({...c,cachedMatches:[...c.cachedMatches,a]}))})});try{return o=await this.loadMatches({matches:o,location:r,preload:!0,updateMatch:(a,c)=>{i.has(a)?o=o.map(l=>l.id===a?c(l):l):this.updateMatch(a,c)}}),o}catch(a){if(it(a))return await this.preloadRoute({...a,_fromLocation:r});console.error(a);return}},this.matchRoute=(e,r)=>{const o={...e,to:e.to?this.resolvePathWithBase(e.from||"",e.to):void 0,params:e.params||{},leaveParams:!0},i=this.buildLocation(o);if(r!=null&&r.pending&&this.state.status!=="pending")return!1;const a=((r==null?void 0:r.pending)===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation,c=bt(this.basepath,a.pathname,{...r,to:i.pathname});return!c||e.params&&!ht(c,e.params,{partial:!0})?!1:c&&((r==null?void 0:r.includeSearch)??!0)?ht(a.search,i.search,{partial:!0})?c:!1:c},this.dehydrate=()=>{var e;const r=((e=this.options.errorSerializer)==null?void 0:e.serialize)??br;return{state:{dehydratedMatches:this.state.matches.map(o=>({...Ct(o,["id","status","updatedAt"]),error:o.error?{data:r(o.error),__isServerError:!0}:void 0}))},manifest:this.manifest}},this.hydrate=()=>{var e,r,o;let i;typeof document<"u"&&(i=this.options.transformer.parse((e=window.__TSR__)==null?void 0:e.dehydrated)),G(i),this.dehydratedData=i.payload,(o=(r=this.options).hydrate)==null||o.call(r,i.payload);const s=i.router.state,a=this.matchRoutes(this.state.location).map(c=>{const l=s.dehydratedMatches.find(u=>u.id===c.id);return G(l,`Could not find a client-side match for dehydrated match with id: ${c.id}!`),{...c,...l}});this.__store.setState(c=>({...c,matches:a})),this.manifest=i.router.manifest},this.injectedHtml=[],this.injectHtml=e=>{const r=()=>(this.injectedHtml=this.injectedHtml.filter(o=>o!==r),e);this.injectedHtml.push(r)},this.injectScript=(e,r)=>{this.injectHtml(`<script class='tsr-once'>${e}; if (typeof __TSR__ !== 'undefined') __TSR__.cleanScripts()<\/script>`)},this.streamedKeys=new Set,this.getStreamedValue=e=>{var r;if(this.isServer)return;const o=(r=window.__TSR__)==null?void 0:r.streamedValues[e];if(o)return o.parsed||(o.parsed=this.options.transformer.parse(o.value)),o.parsed},this.streamValue=(e,r)=>{var o;this.streamedKeys.has(e),this.streamedKeys.add(e),this.injectScript(`__TSR__.streamedValues['${e}'] = { value: ${(o=this.serializer)==null?void 0:o.call(this,this.options.transformer.stringify(r))}}`)},this._handleNotFound=(e,r,{updateMatch:o=this.updateMatch}={})=>{const i=Object.fromEntries(e.map(c=>[c.routeId,c]));let s=(r.global?this.looseRoutesById[J]:this.looseRoutesById[r.routeId])||this.looseRoutesById[J];for(;!s.options.notFoundComponent&&!this.options.defaultNotFoundComponent&&s.id!==J;)s=s.parentRoute,G(s);const a=i[s.id];G(a,"Could not find match for route: "+s.id),o(a.id,c=>({...c,status:"notFound",error:r,isFetching:!1})),r.routerCode==="BEFORE_LOAD"&&s.parentRoute&&(r.routeId=s.parentRoute.id,this._handleNotFound(e,r,{updateMatch:o}))},this.hasNotFoundMatch=()=>this.__store.state.matches.some(e=>e.status==="notFound"||e.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...n,caseSensitive:n.caseSensitive??!1,notFoundMode:n.notFoundMode??"fuzzy",stringifySearch:n.stringifySearch??or,parseSearch:n.parseSearch??nr,transformer:n.transformer??yr}),typeof document<"u"&&(window.__TSR__ROUTER__=this)}get state(){return this.__store.state}get looseRoutesById(){return this.routesById}matchRoutes(n,e,r){return typeof n=="string"?this.matchRoutesInternal({pathname:n,search:e},r):this.matchRoutesInternal(n,e)}matchRoutesInternal(n,e){const{foundRoute:r,matchedRoutes:o,routeParams:i}=this.getMatchedRoutes(n,e==null?void 0:e.dest);let s=!1;(r?r.path!=="/"&&i["**"]:at(n.pathname))&&(this.options.notFoundRoute?o.push(this.options.notFoundRoute):s=!0);const a=(()=>{if(s){if(this.options.notFoundMode!=="root")for(let u=o.length-1;u>=0;u--){const d=o[u];if(d.children)return d.id}return J}})(),c=o.map(u=>{var d;let h;const f=((d=u.options.params)==null?void 0:d.parse)??u.options.parseParams;if(f)try{const p=f(i);Object.assign(i,p)}catch(p){if(h=new Pr(p.message,{cause:p}),e!=null&&e.throwOnError)throw h;return h}}),l=[];return o.forEach((u,d)=>{var h,f,p,m,v,C,L,x;const g=l[d-1],[P,q]=(()=>{const j=(g==null?void 0:g.search)??n.search;try{const B=Bt(u.options.validateSearch,j)??{};return[{...j,...B},void 0]}catch(B){const W=new Nt(B.message,{cause:B});if(e!=null&&e.throwOnError)throw W;return[j,W]}})(),O=((f=(h=u.options).loaderDeps)==null?void 0:f.call(h,{search:P}))??"",z=O?JSON.stringify(O):"",D=wt({path:u.fullPath,params:i,decodeCharMap:this.pathParamsDecodeCharMap}),w=wt({path:u.id,params:i,leaveWildcards:!0,decodeCharMap:this.pathParamsDecodeCharMap})+z,R=this.getMatch(w),b=this.state.matches.find(j=>j.routeId===u.id),T=b?"stay":"enter";let S;if(R)S={...R,cause:T,params:b?Y(b.params,i):i,search:Y(b?b.search:R.search,P)};else{const j=u.options.loader||u.options.beforeLoad||u.lazyFn||_r(u)?"pending":"success";S={id:w,index:d,routeId:u.id,params:b?Y(b.params,i):i,pathname:rt([this.basepath,D]),updatedAt:Date.now(),search:b?Y(b.search,P):P,searchError:void 0,status:j,isFetching:!1,error:void 0,paramsError:c[d],__routeContext:{},__beforeLoadContext:{},context:{},abortController:new AbortController,fetchCount:0,cause:T,loaderDeps:b?Y(b.loaderDeps,O):O,invalid:!1,preload:!1,links:void 0,scripts:void 0,meta:void 0,staticData:u.options.staticData||{},loadPromise:ut(),fullPath:u.fullPath}}const F=(m=(p=u.options).head)==null?void 0:m.call(p,{matches:l,match:S,params:S.params,loaderData:S.loaderData??void 0});S.links=F==null?void 0:F.links,S.scripts=F==null?void 0:F.scripts,S.meta=F==null?void 0:F.meta,S.status==="success"&&(S.headers=(C=(v=u.options).headers)==null?void 0:C.call(v,{loaderData:S.loaderData})),e!=null&&e.preload||(S.globalNotFound=a===u.id),S.searchError=q;const U=(g==null?void 0:g.id)?g.context??this.options.context??{}:this.options.context??{};if(S.context={...U,...S.__routeContext,...S.__beforeLoadContext},!R&&(e==null?void 0:e._buildLocation)!==!0){const j={deps:O,params:S.params,context:S.context,location:n,navigate:B=>this.navigate({...B,_fromLocation:n}),buildLocation:this.buildLocation,cause:S.cause,abortController:S.abortController,preload:!!S.preload,matches:l};S.__routeContext=((x=(L=u.options).context)==null?void 0:x.call(L,j))??{},S.context={...U,...S.__routeContext,...S.__beforeLoadContext}}l.push(S)}),l}}class Nt extends Error{}class Pr extends Error{}function wr(t){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:{...t},location:t,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function br(t){return t instanceof Error?{name:t.name,message:t.message}:{data:t}}function Qt(t){return!(typeof t=="object"&&t&&"data"in t)||!("__isServerError"in t&&t.__isServerError)||!(typeof t.data=="object"&&t.data)?!1:t.__isServerError===!0}function Zt(t){if("name"in t&&"message"in t){const n=new Error(t.message);return n.name=t.name,n}return t.data}const kt=_.createContext(void 0),Cr=_.createContext(void 0);function nt(t){const n=_.useContext(t.from?Cr:kt);return K({select:r=>{const o=r.matches.find(i=>t.from?t.from===i.routeId:i.id===n);if(G(!((t.shouldThrow??!0)&&!o),`Could not find ${t.from?`an active match from "${t.from}"`:"a nearest match!"}`),o!==void 0)return t.select?t.select(o):o},structuralSharing:t.structuralSharing})}function de(t){return nt({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:n=>t.select?t.select(n.loaderData):n.loaderData})}function he(t){const{select:n,...e}=t;return nt({...e,select:r=>n?n(r.loaderDeps):r.loaderDeps})}function fe(t){return nt({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:n=>t.select?t.select(n.params):n.params})}function pe(t){return nt({from:t.from,strict:t.strict,structuralSharing:t.structuralSharing,select:n=>t.select?t.select(n.search):n.search})}function me(t){const{navigate:n}=ot();return _.useCallback(e=>n({...e}),[n])}class ve{constructor(n){this.init=e=>{var r,o;this.originalIndex=e.originalIndex;const i=this.options,s=!(i!=null&&i.path)&&!(i!=null&&i.id);this.parentRoute=(o=(r=this.options).getParentRoute)==null?void 0:o.call(r),s?this._path=J:G(this.parentRoute);let a=s?J:i.path;a&&a!=="/"&&(a=At(a));const c=(i==null?void 0:i.id)||a;let l=s?J:rt([this.parentRoute.id===J?"":this.parentRoute.id,c]);a===J&&(a="/"),l!==J&&(l=rt(["/",l]));const u=l===J?"/":rt([this.parentRoute.fullPath,a]);this._path=a,this._id=l,this._fullPath=u,this._to=u,this._ssr=(i==null?void 0:i.ssr)??e.defaultSsr??!0},this.updateLoader=e=>(Object.assign(this.options,e),this),this.update=e=>(Object.assign(this.options,e),this),this.lazy=e=>(this.lazyFn=e,this),this.useMatch=e=>nt({select:e==null?void 0:e.select,from:this.id,structuralSharing:e==null?void 0:e.structuralSharing}),this.useRouteContext=e=>nt({...e,from:this.id,select:r=>e!=null&&e.select?e.select(r.context):r.context}),this.useSearch=e=>pe({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.id}),this.useParams=e=>fe({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.id}),this.useLoaderDeps=e=>he({...e,from:this.id}),this.useLoaderData=e=>de({...e,from:this.id}),this.useNavigate=()=>me({from:this.id}),this.options=n||{},this.isRoot=!(n!=null&&n.getParentRoute),G(!(n!=null&&n.id&&(n!=null&&n.path))),this.$$typeof=Symbol.for("react.memo")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}get ssr(){return this._ssr}addChildren(n){return this._addFileChildren(n)}_addFileChildren(n){return Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this}}function Lr(t){return new ve(t)}function Vr(){return t=>xr(t)}class Rr extends ve{constructor(n){super(n)}addChildren(n){return super.addChildren(n),this}_addFileChildren(n){return super._addFileChildren(n),this}_addFileTypes(){return this}}function xr(t){return new Rr(t)}function Kr(t){return new Mr(t,{silent:!0}).createRoute}class Mr{constructor(n,e){this.path=n,this.createRoute=r=>{this.silent;const o=Lr(r);return o.isRoot=!1,o},this.silent=e==null?void 0:e.silent}}class Er{constructor(n){this.useMatch=e=>nt({select:e==null?void 0:e.select,from:this.options.id,structuralSharing:e==null?void 0:e.structuralSharing}),this.useRouteContext=e=>nt({from:this.options.id,select:r=>e!=null&&e.select?e.select(r.context):r.context}),this.useSearch=e=>pe({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.options.id}),this.useParams=e=>fe({select:e==null?void 0:e.select,structuralSharing:e==null?void 0:e.structuralSharing,from:this.options.id}),this.useLoaderDeps=e=>he({...e,from:this.options.id}),this.useLoaderData=e=>de({...e,from:this.options.id}),this.useNavigate=()=>me({from:this.options.id}),this.options=n,this.$$typeof=Symbol.for("react.memo")}}function Ur(t){return n=>new Er({id:t,...n})}function Lt(t){return y.jsx(y.Fragment,{children:t.children})}function ge(t,n,e){return n.options.notFoundComponent?y.jsx(n.options.notFoundComponent,{data:e}):t.options.defaultNotFoundComponent?y.jsx(t.options.defaultNotFoundComponent,{data:e}):y.jsx(gr,{})}const ye=_.memo(function({matchId:n}){var e,r;const o=ot(),i=K({select:v=>{var C;return(C=v.matches.find(L=>L.id===n))==null?void 0:C.routeId}});G(i);const s=o.routesById[i],a=s.options.pendingComponent??o.options.defaultPendingComponent,c=a?y.jsx(a,{}):null,l=s.options.errorComponent??o.options.defaultErrorComponent,u=s.options.onCatch??o.options.defaultOnCatch,d=s.isRoot?s.options.notFoundComponent??((e=o.options.notFoundRoute)==null?void 0:e.options.component):s.options.notFoundComponent,h=(!s.isRoot||s.options.wrapInSuspense)&&(s.options.wrapInSuspense??a??((r=s.options.errorComponent)==null?void 0:r.preload))?_.Suspense:Lt,f=l?Vt:Lt,p=d?vr:Lt,m=K({select:v=>v.loadedAt});return y.jsx(kt.Provider,{value:n,children:y.jsx(h,{fallback:c,children:y.jsx(f,{getResetKey:()=>m,errorComponent:l||Ft,onCatch:(v,C)=>{if(Z(v))throw v;u==null||u(v,C)},children:y.jsx(p,{fallback:v=>{if(!d||v.routeId&&v.routeId!==i||!v.routeId&&!s.isRoot)throw v;return _.createElement(d,v)},children:y.jsx(Ir,{matchId:n})})})})})}),Ir=_.memo(function({matchId:n}){var e,r,o,i,s;const a=ot(),{match:c,matchIndex:l,routeId:u}=K({select:p=>{const m=p.matches.findIndex(L=>L.id===n),v=p.matches[m];return{routeId:v.routeId,matchIndex:m,match:Ct(v,["id","status","error"])}},structuralSharing:!0}),d=a.routesById[u],h=_.useMemo(()=>{const p=d.options.component??a.options.defaultComponent;return p?y.jsx(p,{}):y.jsx(Tr,{})},[d.options.component,a.options.defaultComponent]),f=(d.options.errorComponent??a.options.defaultErrorComponent)||Ft;if(c.status==="notFound"){let p;return Qt(c.error)?p=(((e=a.options.errorSerializer)==null?void 0:e.deserialize)??Zt)(c.error.data):p=c.error,G(Z(p)),ge(a,d,p)}if(c.status==="redirected")throw G(it(c.error)),(r=a.getMatch(c.id))==null?void 0:r.loadPromise;if(c.status==="error"){if(a.isServer)return y.jsx(f,{error:c.error,info:{componentStack:""}});throw Qt(c.error)?(((o=a.options.errorSerializer)==null?void 0:o.deserialize)??Zt)(c.error.data):c.error}if(c.status==="pending"){const p=d.options.pendingMinMs??a.options.defaultPendingMinMs;if(p&&!((i=a.getMatch(c.id))!=null&&i.minPendingPromise)&&!a.isServer){const m=ut();Promise.resolve().then(()=>{a.updateMatch(c.id,v=>({...v,minPendingPromise:m}))}),setTimeout(()=>{m.resolve(),a.updateMatch(c.id,v=>({...v,minPendingPromise:void 0}))},p)}throw(s=a.getMatch(c.id))==null?void 0:s.loadPromise}return y.jsxs(y.Fragment,{children:[h,a.AfterEachMatch?y.jsx(a.AfterEachMatch,{match:c,matchIndex:l}):null]})}),Tr=_.memo(function(){const n=ot(),e=_.useContext(kt),r=K({select:l=>{var u;return(u=l.matches.find(d=>d.id===e))==null?void 0:u.routeId}}),o=n.routesById[r],i=K({select:l=>{const d=l.matches.find(h=>h.id===e);return G(d),d.globalNotFound}}),s=K({select:l=>{var u;const d=l.matches,h=d.findIndex(f=>f.id===e);return(u=d[h+1])==null?void 0:u.id}});if(i)return ge(n,o,void 0);if(!s)return null;const a=y.jsx(ye,{matchId:s}),c=n.options.defaultPendingComponent?y.jsx(n.options.defaultPendingComponent,{}):null;return e===J?y.jsx(_.Suspense,{fallback:c,children:a}):a}),Fr="Error preloading route! ☝️";function kr(t,n){const e=ot(),[r,o]=_.useState(!1),i=_.useRef(!1),s=lr(n),{activeProps:a=()=>({className:"active"}),inactiveProps:c=()=>({}),activeOptions:l,to:u,preload:d,preloadDelay:h,replace:f,startTransition:p,resetScroll:m,viewTransition:v,children:C,target:L,disabled:x,style:g,className:P,onClick:q,onFocus:O,onMouseEnter:z,onMouseLeave:D,onTouchStart:w,ignoreBlocker:R,...b}=t,{params:T,search:S,hash:F,state:k,mask:U,...j}=b,B=_.useMemo(()=>{try{return new URL(`${u}`),"external"}catch{}return"internal"},[u]),W=K({select:M=>M.location.search,structuralSharing:!0});t={from:nt({strict:!1,select:M=>M.pathname}),...t};const E=_.useMemo(()=>e.buildLocation(t),[e,t,W]),N=_.useMemo(()=>d??e.options.defaultPreload,[e.options.defaultPreload,d]),A=h??e.options.defaultPreloadDelay??0,I=K({select:M=>{if(l!=null&&l.exact){if(!dr(M.location.pathname,E.pathname,e.basepath))return!1}else{const $=xt(M.location.pathname,e.basepath).split("/");if(!xt(E.pathname,e.basepath).split("/").every((_e,Se)=>_e===$[Se]))return!1}return((l==null?void 0:l.includeSearch)??!0)&&!ht(M.location.search,E.search,{partial:!(l!=null&&l.exact),ignoreUndefined:!(l!=null&&l.explicitUndefined)})?!1:l!=null&&l.includeHash?M.location.hash===E.hash:!0}}),H=_.useCallback(()=>{e.preloadRoute(t).catch(M=>{console.warn(M),console.warn(Fr)})},[t,e]),st=_.useCallback(M=>{M!=null&&M.isIntersecting&&H()},[H]);if(cr(s,st,{rootMargin:"100px"},{disabled:!!x||N!=="viewport"}),_t(()=>{i.current||!x&&N==="render"&&(H(),i.current=!0)},[x,H,N]),B==="external")return{...j,ref:s,type:B,href:u,...C&&{children:C},...L&&{target:L},...x&&{disabled:x},...g&&{style:g},...P&&{className:P},...q&&{onClick:q},...O&&{onFocus:O},...z&&{onMouseEnter:z},...D&&{onMouseLeave:D},...w&&{onTouchStart:w}};const ct=M=>{if(!x&&!jr(M)&&!M.defaultPrevented&&(!L||L==="_self")&&M.button===0){M.preventDefault(),Pe.flushSync(()=>{o(!0)});const $=e.subscribe("onResolved",()=>{$(),o(!1)});e.buildAndCommitLocation({...t,replace:f,resetScroll:m,startTransition:p,viewTransition:v,ignoreBlocker:R})}},vt=M=>{x||N&&H()},lt=vt,V=M=>{if(x)return;const $=M.target||{};if(N){if($.preloadTimeout)return;$.preloadTimeout=setTimeout(()=>{$.preloadTimeout=null,H()},A)}},Q=M=>{if(x)return;const $=M.target||{};$.preloadTimeout&&(clearTimeout($.preloadTimeout),$.preloadTimeout=null)},X=M=>$=>{var jt;(jt=$.persist)==null||jt.call($),M.filter(Boolean).forEach(Kt=>{$.defaultPrevented||Kt($)})},gt=I?dt(a,{})??{}:{},yt=I?{}:dt(c,{}),Pt=[P,gt.className,yt.className].filter(Boolean).join(" "),tt={...g,...gt.style,...yt.style};return{...j,...gt,...yt,href:x?void 0:E.maskedLocation?e.history.createHref(E.maskedLocation.href):e.history.createHref(E.href),ref:s,onClick:X([q,ct]),onFocus:X([O,vt]),onMouseEnter:X([z,V]),onMouseLeave:X([D,Q]),onTouchStart:X([w,lt]),disabled:!!x,target:L,...Object.keys(tt).length&&{style:tt},...Pt&&{className:Pt},...x&&{role:"link","aria-disabled":!0},...I&&{"data-status":"active","aria-current":"page"},...r&&{"data-transitioning":"transitioning"}}}const Wr=_.forwardRef((t,n)=>{const{_asChild:e,...r}=t,{type:o,ref:i,...s}=kr(r,n),a=typeof r.children=="function"?r.children({isActive:s["data-status"]==="active"}):r.children;return typeof e>"u"&&delete s.disabled,_.createElement(e||"a",{...s,ref:i},a)});function jr(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Or(){const t=ot(),n=_.useRef({router:t,mounted:!1}),e=K({select:({isLoading:d})=>d}),[r,o]=_.useState(!1),i=K({select:d=>d.matches.some(h=>h.status==="pending"),structuralSharing:!0}),s=$t(e),a=e||r||i,c=$t(a),l=e||i,u=$t(l);return t.isServer||(t.startReactTransition=d=>{o(!0),_.startTransition(()=>{d(),o(!1)})}),_.useEffect(()=>{const d=t.history.subscribe(t.load),h=t.buildLocation({to:t.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});return at(t.latestLocation.href)!==at(h.href)&&t.commitLocation({...h,replace:!0}),()=>{d()}},[t,t.history]),_t(()=>{var d;if(typeof window<"u"&&((d=window.__TSR__)!=null&&d.dehydrated)||n.current.router===t&&n.current.mounted)return;n.current={router:t,mounted:!0},(async()=>{try{await t.load()}catch(f){console.error(f)}})()},[t]),_t(()=>{if(s&&!e){const d=t.state.location,h=t.state.resolvedLocation,f=h.pathname!==d.pathname,p=h.href!==d.href;t.emit({type:"onLoad",fromLocation:h,toLocation:d,pathChanged:f,hrefChanged:p})}},[s,t,e]),_t(()=>{if(u&&!l){const d=t.state.location,h=t.state.resolvedLocation,f=h.pathname!==d.pathname,p=h.href!==d.href;t.emit({type:"onBeforeRouteMount",fromLocation:h,toLocation:d,pathChanged:f,hrefChanged:p})}},[l,u,t]),_t(()=>{if(c&&!a){const d=t.state.location,h=t.state.resolvedLocation,f=h.pathname!==d.pathname,p=h.href!==d.href;if(t.emit({type:"onResolved",fromLocation:h,toLocation:d,pathChanged:f,hrefChanged:p}),t.__store.setState(m=>({...m,status:"idle",resolvedLocation:m.location})),typeof document<"u"&&document.querySelector&&t.state.location.hash!==""){const m=document.getElementById(t.state.location.hash);m&&m.scrollIntoView()}}},[a,c,t]),null}function Dr(){const t=ot(),n=t.options.defaultPendingComponent?y.jsx(t.options.defaultPendingComponent,{}):null,e=t.isServer||typeof document<"u"&&window.__TSR__?Lt:_.Suspense,r=y.jsxs(e,{fallback:n,children:[y.jsx(Or,{}),y.jsx($r,{})]});return t.options.InnerWrap?y.jsx(t.options.InnerWrap,{children:r}):r}function $r(){const t=K({select:e=>{var r;return(r=e.matches[0])==null?void 0:r.id}}),n=K({select:e=>e.loadedAt});return y.jsx(kt.Provider,{value:t,children:y.jsx(Vt,{getResetKey:()=>n,errorComponent:Ft,onCatch:e=>{e.message||e.toString()},children:t?y.jsx(ye,{matchId:t}):null})})}function zr({router:t,children:n,...e}){t.update({...t.options,...e,context:{...t.options.context,...e.context}});const r=se(),o=y.jsx(r.Provider,{value:t,children:n});return t.options.Wrap?y.jsx(t.options.Wrap,{children:o}):o}function Hr({router:t,...n}){return y.jsx(zr,{router:t,...n,children:y.jsx(Dr,{})})}function Gr(t){return K({select:n=>n.location})}export{Ft as E,Wr as L,Tr as O,Hr as R,Kr as a,me as b,Vr as c,Gr as d,de as e,ot as f,Ar as g,Ur as h,y as j,Nr as r,pe as u};
